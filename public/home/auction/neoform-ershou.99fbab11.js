var NeoForm=function(t){function e(a){if(n[a])return n[a].exports;var i=n[a]={i:a,l:!1,exports:{}};return t[a].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,a){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:a})},e.n=function(t){var n=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=103)}([function(t,e,n){"use strict";function a(t,e,n){var a,i,r,o=null,s=0;n||(n={});var l=function(){s=n.leading===!1?0:+new Date,o=null,r=t.apply(a,i),o||(a=i=null)};return function(){var u=+new Date;s||n.leading!==!1||(s=u);var c=e-(u-s);return a=this,i=arguments,c<=0||c>e?(o&&(clearTimeout(o),o=null),s=u,r=t.apply(a,i),o||(a=i=null)):o||n.trailing===!1||(o=setTimeout(l,c)),r}}function i(t,e,n){var a,i,r,o,s,l=function(){var u=(new Date).getTime()-o;u<e&&u>=0?a=setTimeout(l,e-u):(a=null,n||(s=t.apply(r,i),a||(r=i=null)))};return function(){r=this,i=arguments,o=(new Date).getTime();var u=n&&!a;return a||(a=setTimeout(l,e)),u&&(s=t.apply(r,i),r=i=null),s}}function r(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];$.each(e,function(e,n){$.each(n.prototype,function(e){n.prototype.hasOwnProperty(e)&&(t.prototype[e]=n.prototype[e])})})}function o(t){setTimeout(function(t){var e=t.value.length;return function(){void 0!==t.setSelectionRange?t.setSelectionRange(e,e):$(t).val(t.value),t.scrollLeft=99999}}(t),5)}function s(t){v++,parseFloat($("body").css("top"))<0||("undefined"==typeof t&&(t=$(window).scrollTop()),$("html").css({height:"100%",overflow:"hidden"}),$("body").css({top:-1*t,position:"relative"}),$(window).scrollTop(0))}function l(t){if(void 0===t&&(t=!1),t?v=0:v--,!(v>0)){var e=parseFloat($("body").css("top"));$("html").css({height:"",overflow:""}),$("body").css({top:"",position:""}),e<0&&$(window).scrollTop(-e)}}function u(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var a=t[0],i=0,r=t.length-1;i<r;i++)a+=c(e[i])+t[i+1];return a}function c(t){return g.empty().text(t).html()}function h(t){"undefined"!=typeof console&&console.error(t)}function p(t){if(document.createEvent&&t)try{var e=document.createEvent("MouseEvent");e.initMouseEvent("mousedown",!0,!0),t.dispatchEvent(e)}catch(e){}}function d(t){return t.replace(/[\~\!\@\$\%\^\&\*\(\)\+\=\,\.\/\'\;\:\"\?\>\<\[\]\\\{\}\|\`\#]/g,"")}function f(){}e.__esModule=!0;var m=function(){function t(){this.events={}}return t.prototype.on=function(t,e){var n=this.events[t]||(this.events[t]=[]);return n.push(e),this},t.prototype.once=function(t,e){var n=this,a=function(i){e(i),n.off(t,a)};return this.on(t,a)},t.prototype.off=function(t,e){if(!t&&!e)return this.events={},this;var n=this.events[t];if(n)if(e)for(var a=n.length-1;a>=0;a--)n[a]===e&&n.splice(a,1);else delete this.events[t];return this},t.prototype.emit=function(t,e){var n=this.events[t];if(n){n=n.slice();for(var a=0,i=n.length;a<i;a++)n[a](e)}return this},t}();e.EventEmitter=m,e.throttle=a,e.debounce=i,e.applyMixin=r,e.focusEnd=o;var v=0;e.lockScroll=s,e.releaseScroll=l,e.h=u;var g=$("<div>");e.escapeHtml=c,e.logError=h,e.openSelectMenu=p,e.sanitizeCSSSelectorText=d,e.NOOP=f},function(t,e,n){"use strict";function a(t){return 1!==t.nodeType?0:$(t).height()||t.clientHeight}var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function a(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}();e.__esModule=!0;var r=n(2),o=n(0),s=n(0),l=n(3),u=function(t){function e(e,n){var a=t.call(this)||this;a.meta=e,a.form=n,a.validators=[];var i=a.validators;return e.required?i.push(r.required):i.push(r.optional),e.tips&&a.showTips(),a}return i(e,t),e.prototype.onMount=function(t){this.on("mount",t)},e.prototype.onUnmount=function(t){this.on("unmount",t)},e.prototype.onChange=function(t){var e=this;return this.$element?(this.events.change||this.$element.on("change",function(){return e.emit("change",e)}),void this.on("change",t)):this.on("change",t)},e.prototype.setAttr=function(t,e){this.meta[t]=e},e.prototype.getAttr=function(t){if(t in this.meta){var e=this.meta[t];return"string"==typeof e&&0===e.indexOf("imports.")?this.form.getData(e):e}return"displayName"===t?this.meta.name:"value"===t?this.getAttr("defaultValue"):null},e.prototype.getValue=function(){return this.$element.val()},e.prototype.setValue=function(t){this.$element.val(t),this.emit("change",this)},e.prototype.getName=function(){return this.meta.name},e.prototype.isHidden=function(){if(!this.$element)return!0;var t=this.$element.get().map(a),e=0===$.grep(t,function(t){return t>0}).length;if(e)return!0;var n=this.form.getLayoutManager().FORM;return!this.$element.closest(n.LINE).get(0).clientHeight},e.prototype.isValid=function(){if(!this.$element||this.isHidden())return!0;var t=r.validate(this.getValue(),this.validators);return!t},e.prototype.validate=function(){if(!this.$element||this.isHidden())return!0;var t=void 0,e=function(e){return t=e};this.on("overrideValidate",e),this.emit("beforeValidate");var n=void 0!==t?t:r.validate(this.getValue(),this.validators);return n?this.showError(n):this.showError(null),this.off("overrideValidate",e),!n},e.prototype.showError=function(t){var e=this,n=this.form.getLayoutManager().FORM,a="change.neoform.validate";this.$element.off(a).on(a,function(){e.validate()});var i=s.sanitizeCSSSelectorText(this.getName()),r=n.EL_ERROR+"#error-"+i,o=this.$element.closest(n.LINE),u=n===l.P_FORM?this.$element:o;if(u.removeClass("error"),o.children(r).remove(),t){var c=this.meta,h=t.force?t.message:c.error||t.message;u.addClass("error"),o.append([(p=["<",' class="','" id="error-','">'],p.raw=["<",' class="','" id="error-','">'],s.h(p,n.EL_ERROR,n.CLS_ERROR,i)),n.DOM_ERR_ICON,h,"</"+n.EL_ERROR+">"].join(""));var p}},e.prototype.showTips=function(){var t=this,e=this.form.getLayoutManager().FORM,n=this.meta.tips,a=$((r=['\n<div class="','">\n\t','\n\t<span class="circle"><i class="icon-tips"></i></span>\n</div>'],r.raw=['\n<div class="','">\n\t','\n\t<span class="circle"><i class="icon-tips"></i></span>\n</div>'],s.h(r,e.CLS_TIP,n))),i=function(){a.toggleClass("show"),a.css("top",-a.height()/2)};this.onMount(function(){t.$element.closest(e.LINE).append(a),t.$element.on("mouseenter mouseleave",i)}),this.onUnmount(function(){a.remove(),t.$element.off("mouseenter mouseleave",i)});var r},e}(o.EventEmitter);e.BaseFormControl=u},function(t,e,n){"use strict";function a(t,e){try{for(var n=0,a=e;n<a.length;n++){var i=a[n],r=i(t);if(r)return r}}catch(o){if(o instanceof b)return o.ret}return null}function i(t){if(!t.length)return null;var e=/^\-?(?:[1-9]\d*|0)(?:[.]\d*)?$/,n=+t;return!e.test(t)||isNaN(n)?{error:"number",message:"此处只能输入数字"}:void 0}function r(t){return t?$.isArray(t)&&0===t.filter(C).length?{error:"required",message:"此项必填"}:$.isEmptyObject(t)?{error:"required",message:"此项必填"}:null:{error:"required",message:"此项必填"}}function o(t){if(!t)throw new b(null);return null}function s(t,e){var n=function(n){var a=i(n),r=parseFloat(n);if(a)return a.error="range",a;var o=t,s=e;return(null==o||isNaN(o))&&(o=r),(null==s||isNaN(s))&&(s=r),r>=o&&r<=s?null:{error:"range",message:"数值不正确"}};return n["@@name"]="range",n}function l(t){var e=s(null,t);return function(n){if(isNaN(+n))return null;var a=e(n);return a?{error:"maxvalue",message:"所填数值不能超过"+t}:null}}function u(t){return/^1[3-9]\d{9}$/.test(t)?null:{error:"mobile",message:"不正确的手机格式"}}function c(t){return function(e){return e.length<=t?null:{error:"maxItem",message:"最多可选"+t+"项"}}}function h(t){return function(e){return e.length>=t?null:{error:"minItem",message:"至少要选"+t+"项"}}}function p(t){return function(e){return isNaN(t)||e.length<=t?null:{error:"maxlength",message:"不能超过"+t+"字"}}}function d(t){return function(e){return isNaN(t)||e.length>=t?null:{error:"minlength",message:"至少填写"+t+"字"}}}function f(t){var e=new RegExp(t);return function(t){return e.test(t)?null:{error:"pattern",message:"您输入的格式不正确"}}}function m(t){var e=$.isArray(t)&&t[0]&&t[1];return e?null:{error:"date",message:"请选择年份和月份"}}function v(t){return t=t||"请认真填写信息",function(e){var n=$.isArray(e)&&0===e.filter(function(t){return!t}).length;return n?null:{error:"dual",message:t}}}function g(t,e){return e=e||"不能包含“"+t+"”",function(n){return n.search(t)<0?null:{error:"notContain",message:e}}}function y(t,e){return function(n){for(var a=0;a<t.length;++a)if(n.indexOf(t[a])!==-1)return e=e||"不能包含“"+t[a]+"”",{error:"notInArray",message:e};return null}}function _(t,e){var n=s(t,null);return function(a){return""===a?null:isNaN(+a)||n(a)?{error:"minvalue",message:e||"所填数值不能低于"+t}:null}}e.__esModule=!0;var b=function(){function t(t){this.ret=t}return t}();e.validate=a,e.number=i;var C=function(t){return t};e.required=r,e.optional=o,e.range=s,e.maxvalue=l,e.mobile=u,e.maxItem=c,e.minItem=h,e.maxlength=p,e.minlength=d,e.pattern=f,e.dateRequired=m,e.dualRequired=v,e.notContains=g,e.notContainsInArray=y,e.minvalue=_},function(t,e,n){"use strict";e.__esModule=!0,e.P_FORM={DOM_REQUIRED:'<span class="required">*</span>',DOM_ERR_ICON:'<i class="error-icon">×</i>',EL_ERROR:"em",CLS_LINE:"p-line",CLS_LABEL:"p-label",CLS_CTRL:"publish-detail-item",CLS_UNIT:"fabuform-unit",CLS_NOTE:"p-note",CLS_TIP:"form-tip",CLS_ERROR:"error",CLS_OPTIONS:"",LINE:".p-line",LABEL:".p-label",CTRL:".publish-detail-item",UNIT:".fabuform-unit",REQUIRED:"span.required",ERROR:"em.error"},e.CM_FORM={DOM_REQUIRED:'<em class="required">*</em>',DOM_ERR_ICON:'<i class="cm-icon cm-icon-x20-msg-error"></i>',EL_ERROR:"div",CLS_LINE:"cm-form-line",CLS_LABEL:"cm-form-label",CLS_CTRL:"cm-form-ctrl",CLS_UNIT:"cm-form-unit",CLS_NOTE:"cm-form-note-minor",CLS_TIP:"cm-form-note",CLS_ERROR:"cm-form-error",CLS_OPTIONS:"cm-form-option-list",LINE:".cm-form-line",LABEL:".cm-form-label",CTRL:".cm-form-ctrl",UNIT:".cm-form-unit",REQUIRED:"em.required",ERROR:".cm-form-error"}},function(t,e,n){"use strict";var a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function a(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}();e.__esModule=!0;var i=n(0),r=function(t){function e(e,n,a){void 0===a&&(a={});var i=t.call(this)||this;i.isEdit=!1,i.values={},i._controls={},i._layouts={},i.options=$.extend({values:"",imports:{}},n),i.$rootElement=e,i.dataSource=a,i.isEdit=!!a.isEdit,i.options.values&&(i.values=JSON.parse(i.options.values)),i.metas=n.config.metas,i.forms=n.config.forms;for(var r=0,o=i.getPlugins();r<o.length;r++){var s=o[r];new s(i)}return i.emit("beforeInit",n.config),i.off("beforeInit"),i.main(),i.emit("afterInit"),i.off("afterInit"),i}return a(e,t),e.prototype.main=function(){var t=this;this.initControls(),this.initLayout(),this.initTab(),this.redrawTab(),$("h1.j-loading-placeholder").remove(),this.$rootElement.show(),this.setFormValues(this.values),this.$rootElement.on("submit",function(e){t.onSubmit(e)})},e.prototype.initControls=function(){for(var t=this.metas,e=this.getControlFactory(),n=0,a=t;n<a.length;n++){var i=a[n],r=e.getControlByMeta(i,this);this._controls[i.name]=r}this.emit("afterControlInit")},e.prototype.initLayout=function(){var t=this.forms.form,e=this,n=this.getLayoutManager();$.each(t,function(t,a){var i=a.id;e._layouts[i]=$.map(a.children,n.generateControlLayout)})},e.prototype.initTab=function(){var t=this,e=this,n=this.forms.tabs,a=this.getLayoutManager(),i=a.defaultWrapper;if(n){var r=n.input,o=$('<div class="fabuform-tab"></div>'),s=$('<div class="fabuform-tab-content"></div>');$.each(r,function(t,n){var r=e.getControl(n),s=r.getName(),l={name:s,type:"input",eles:[s]},u=new i(l,r,e).wrap();u.appendTo(o),a.emitControlEventInLayout("mount",l,e)}),o.on("change.initTab",function(){return t.redrawTab()}),this.$rootElement.prepend(s),this.$rootElement.prepend(o)}},e.prototype.redrawTab=function(){var t="form";this.$rootElement.children(".fabuform-tab").find(":checked").each(function(){t+="-"+$(this).val()}),this.emit("beforeTabChange",[this._currentFormId,t]),this._fillForm(t),this.emit("afterTabChange",[this._currentFormId,t])},e.prototype.onSubmit=function(t){var e=this._controls,n=!0,a=function(t){n=!t},i=this.dataSource.isMobile?"wap":"web";window.tracker&&tracker.evt("fabu_submit",{platform:i}),this.on("shouldStopSubmission",a),this.emit("beforeValidate");var r=null;if(n)for(var o=0,s=this.getCurrentControlLayouts();o<s.length;o++)for(var l=s[o],u=0,c=l.eles;u<c.length;u++){var h=c[u],p=e[h];n=p.validate()&&n,n||r||(r=h)}if(n)this.emit("afterValidate");else{var d=this.$rootElement.find(".error").eq(0);$(window).scrollTop(d.offset().top)}this.off("shouldStopSubmission",a),n?(window.tracker&&tracker.evt("fabu_submit_success",{platform:i}),this.$rootElement.find("[type=submit]").prop("disabled",!0).val("信息发布中，请稍候...")):(this.emit("onValidError"),t.preventDefault(),r&&window.tracker&&tracker.evt("fabu_submit_error",{platform:i,field:r}))},e.prototype.setFormValues=function(t){for(var e in t)if(e in this._controls){var n=this.getControl(e);n.setValue(t[e])}else delete this.values[e]},e.prototype.getData=function(t){if(0!==t.indexOf("imports."))throw new Error("invalid key");var e=t.substring(8);return this.dataSource[e]},e.prototype.hasControl=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return e.map(function(e){return!!t._controls[e]}).reduce(function(t,e){return t&&e})},e.prototype.getControl=function(t){if(this._controls[t])return this._controls[t];throw new Error("No control found for "+t)},e.prototype.getCurrentControlLayouts=function(){return this._layouts[this._currentFormId]},e.prototype._fillForm=function(t){var e=this.$rootElement.children(".fabuform-tab-content");this._unmountControls(e);var n=this._layouts[t]||this._layouts[Object.keys(this._layouts)[0]],a=[],i=this.getLayoutManager();this._currentFormId=t;for(var r=0,o=n;r<o.length;r++){var s=o[r],l=i.getWrapper(s,this);a.push(l.wrap()),l.bind()}for(var u=0,c=a;u<c.length;u++){var h=c[u];e.append(h)}for(var p=0,d=n;p<d.length;p++){var s=d[p];i.emitControlEventInLayout("mount",s,this),i.bindErrorCheckInLayout(s,this)}},e.prototype._unmountControls=function(t){if(this._currentFormId){for(var e=this._layouts[this._currentFormId],n=this.getLayoutManager(),a=0,i=e;a<i.length;a++){var r=i[a];n.emitControlEventInLayout("unmount",r,this)}t.children().detach()}},e}(i.EventEmitter);e.NeoForm=r},function(t,e,n){"use strict";var a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function a(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}();e.__esModule=!0;var i=n(0),r=n(1),o=n(2),s=function(t){function e(e,n){var a=t.call(this,e,n)||this;a.meta=e,a.form=n;var i=a.validators;return e.maxlength&&i.push(o.maxlength(+e.maxlength)),e.minlength&&i.push(o.minlength(+e.minlength)),a}return a(e,t),e.prototype.render=function(){var t=this;if(this.$element)return this.$element;var e=this.meta.name,n=this.meta.value||this.meta.defaultValue||"",a=$((r=["<textarea class='input' name='","'>","</textarea>"],r.raw=["<textarea class='input' name='","'>","</textarea>"],i.h(r,e,n))).attr({placeholder:this.meta.placeholder,maxlength:this.meta.maxlength,size:this.meta.size});return this.once("mount",function(t){a.autosize&&a.autosize()}),this.events.change&&a.on("change",function(){return t.emit("change",t)}),this.$element=a;var r},e.prototype.setValue=function(e){e=$("<div></div>").html(e).text(),t.prototype.setValue.call(this,e)},e}(r.BaseFormControl);e["default"]=s},function(t,e,n){"use strict";function a(t,e){var n=t.getAttr("unit");return n?$("<span class='"+e.CLS_UNIT+"'>"+n+"</span>"):""}function i(t){var e=t.getAttr("connector");return e?$('<span class="fabuform-connectors">'+e+"</span>"):""}e.__esModule=!0,e.unit=a,e.connector=i},function(t,e,n){"use strict";var a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function a(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}();e.__esModule=!0;var i=n(0),r=n(1),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.render=function(){if(this.$element)return this.$element;var t=this.meta.name,e=$((n=["<input type='hidden' name='","'/>"],n.raw=["<input type='hidden' name='","'/>"],i.h(n,t))).attr({value:this.getAttr("value")});return this.$element=e;var n},e}(r.BaseFormControl);e["default"]=o},function(t,e,n){"use strict";var a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function a(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}();e.__esModule=!0;var i=n(0),r=n(1),o=n(2),s=n(3),l=function(t){function e(e,n){var a=t.call(this,e,n)||this;a.meta=e,a.form=n;var i=a.validators;return e.maxlength&&i.push(o.maxlength(+e.maxlength)),e.minlength&&i.push(o.minlength(+e.minlength)),e.pattern&&i.push(o.pattern(e.pattern)),e.numeric&&!e.pattern&&i.push(o.number),e.maxvalue&&i.push(o.maxvalue(+e.maxvalue)),a}return a(e,t),e.prototype.render=function(){var t=this;if(this.$element)return this.$element;var e,n=this.form.getLayoutManager().FORM,a=this.meta.name,r=this.getType();return this.meta.prefix&&n===s.P_FORM?(e=$((o=['<span class="prefix">',"</span><input type='","' name='","'/>"],o.raw=['<span class="prefix">',"</span><input type='","' name='","'/>"],i.h(o,this.meta.prefix,r,a))),this.$element=e.eq(-1)):this.$element=e=$((l=["<input type='","' name='","'/>"],l.raw=["<input type='","' name='","'/>"],i.h(l,r,a))),this.$element.attr({name:this.meta.name,value:this.getAttr("value"),maxlength:this.meta.maxlength,readonly:this.meta.readonly,placeholder:this.meta.placeholder,step:this.meta.step,"class":this.meta.size?(u=["input-"," input"],u.raw=["input-"," input"],i.h(u,this.meta.size)):"input"}),this.events.change&&this.$element.on("change",function(){return t.emit("change",t)}),e;var o,l,u},e.prototype.getType=function(){return this.meta.numeric?"number":this.meta.tel?"tel":"text"},e.prototype.getValue=function(){var e=t.prototype.getValue.call(this),n=this.$element[0];return!e&&this.meta.numeric&&n.validity&&n.validity.badInput?"NaN":e},e.prototype.setValue=function(e){this.meta.unit&&(e=e.replace(this.meta.unit,"")),e=$("<div></div>").html(e).text(),t.prototype.setValue.call(this,e)},e}(r.BaseFormControl);e["default"]=l},function(t,e,n){"use strict";function a(){return $('<div class="modal fade in " id="qrcode" role="dialog">\n\t\t\t\t<div class="modal-dialog" role="document">\n\t\t\t\t\t<div class="modal-header">\n\t\t\t\t\t\t<button class="close" data-dismiss="modal" aria-label="Close">\n\t\t\t\t\t\t\t<span aria-hidden="">×</span>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<div class="modal-title">扫描二维码下载百姓网APP</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="modal-body" style="background:#f0f0f0">\n\t\t\t\t\t\t<p style="text-align: center">\n\t\t\t\t\t\t\t<img src="//file.baixing.net/201707/7679fd1292047ee21ffa3fc2105b948b.jpeg">\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\t\n\t\t</div>')}var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function a(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}();e.__esModule=!0;var r=n(0),o=n(1),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.render=function(){var t=this;if(this.$element)return this.$element;var e=$((n=['\n\t\t\t<div class="image-box">\n\t\t\t\t<div class="img">\n\t\t\t\t\t<img src="">\n\t\t\t            <a href="javaScript:;" class="postimg-status-del">×</a>\n\t\t\t\t</div>\n\t\t\t\t<input type="hidden" value="0" name="short_video">\n\t\t\t</div>\n\t\t'],n.raw=['\n\t\t\t<div class="image-box">\n\t\t\t\t<div class="img">\n\t\t\t\t\t<img src="">\n\t\t\t            <a href="javaScript:;" class="postimg-status-del">×</a>\n\t\t\t\t</div>\n\t\t\t\t<input type="hidden" value="0" name="short_video">\n\t\t\t</div>\n\t\t'],r.h(n)));return e.find("a").on("click",function(){e.find(".img").remove();var n="javaScript:;",a="down-link";t.form.getData("imports.isMobile")&&(n="/a/app/?e=video-delete",a="link"),e.append($('\n\t\t\t\t\t<p class="'+a+'">下载百姓网APP，重新上传视频，<a href="'+n+'" >点击下载</a></p>\n\t\t\t\t')),e.find("input").val(1)}),e.on("click",".down-link a",function(){var t=$("#qrcode");t.length<1&&$("body").append(a()),$("#qrcode").modal("show")}),this.$element=e;var n},e.prototype.setValue=function(t){this.$element.find("img").attr("src",t.imageUrl),this.$element.find("input").val(t.id)},e}(o.BaseFormControl);e["default"]=s},function(t,e,n){"use strict";var a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function a(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}();e.__esModule=!0;var i=n(0),r=n(1),o=function(t){function e(e,n){var a=t.call(this,e,n)||this;return a.meta=e,a.form=n,a}return a(e,t),e.prototype.render=function(){var t=this,e=this.form.getLayoutManager().FORM;if(this.$element)return this.$element;var n=this.getAttr("values"),a=this.getAttr("displayValues")||n,r=this.meta.name,o=this.meta.value||this.meta.defaultValue,s=(u=["<input type='hidden'>"],u.raw=["<input type='hidden'>"],i.h(u)),s=$.map(n,function(t,e){var n=o===t?"checked":"",s=a[e];return l=['<label class="form-label"><input type="radio" name="','" value="','" class="checkbox-radio" ',">","</label>"],l.raw=['<label class="form-label"><input type="radio" name="','" value="','" class="checkbox-radio" ',">","</label>"],i.h(l,r,t,n,s);var l}).join("");e.CLS_OPTIONS&&(s='<div class="'+e.CLS_OPTIONS+'">'+s+"</div>");var l=$(s);return this.events.change&&l.on("change",function(){return t.emit("change",t)}),this.$element=l;var u},e.prototype.getValue=function(){return this.$element.find(":checked").val()},e.prototype.setValue=function(t){this.getValue()!==t&&this.emit("change"),this.$element.find('[value="'+t+'"]').prop("checked",!0)},e}(r.BaseFormControl);e["default"]=o},function(t,e,n){"use strict";e.__esModule=!0;var a=function(){function t(t,e,n){this.layout=t,this.control=e,this.form=n}return t.prototype.wrap=function(){return this._element=this.control.render()},t.prototype.bind=function(){},t.prototype._findParentLayout=function(t){},t.prototype.unbind=function(){},t}();e.SkipWrapper=a},function(t,e,n){"use strict";e.__esModule=!0;var a=n(6),i=n(13),r=n(0),o=function(){function t(t,e,n){this.layout=t,this.control=e,this.form=n,this._tabHandler=null,this._changeHandler=null}return t.prototype.wrap=function(){var t=this.form.getLayoutManager().FORM,e=this.control,n=e.getAttr("displayName"),i=e.getAttr("required"),o=this.layout.hidden&&!this.form.isEdit,s=o?"pline-hide":"",l=e.render(),u=r.sanitizeCSSSelectorText(e.getName()),c=$('<label class="p-label"></label>').text(n?n+"：":"");i&&c.prepend('<span class="required">*</span>');var h=$('<div class="p-line" id="id_'+u+'">').append(c,$('<div class="publish-detail-item"></div>'),a.unit(e,t)).addClass(s);return h.find("div").append(l),this._element=h,h},t.prototype.bind=function(){},t.prototype._findParentLayout=function(t){},t.prototype.unbind=function(){},t}();e.InputWrapper=o,r.applyMixin(o,i.WrapperAutoHidingMixin)},function(t,e,n){"use strict";e.__esModule=!0;var a=function(){function t(){this._tabHandler=null,this._changeHandler=null}return t.prototype.bind=function(){var t=this,e=this.layout.hidden;if(e&&this._element.hasClass("pline-hide")){this._tabHandler=function(){return t.unbind()},this.form.on("beforeTabChange",this._tabHandler);var n=this._findParentLayout(e);if(n){var a=this.form,i=this._element,r=this._changeHandler=function(t){var e=$(t.target).closest(".p-line").find(".p-label").text();if(e=e.replace("*",""),e=e.replace("：",""),e===n.name){for(var o=!0,s=0,l=n.eles;s<l.length;s++){var u=l[s],c=a.getControl(u);o=o&&!!c.getValue()}o&&(i.removeClass("pline-hide"),a.$rootElement.off("change",r))}};setTimeout(function(){a.$rootElement.on("change",r)},100)}}},t.prototype._findParentLayout=function(t){var e=this.form.getCurrentControlLayouts();if(1===+t){var n=$.inArray(this.layout,e);return e[n-1]}for(var a=0,i=e;a<i.length;a++){var r=i[a];if(r.name===t)return r}},t.prototype.unbind=function(){if(this.layout.hidden){this.form.off("afterTabChange",this._tabHandler),this._tabHandler=null;var t=this._changeHandler;this.form.$rootElement.off({change:t})}},t}();e.WrapperAutoHidingMixin=a},function(t,e,n){"use strict";e.__esModule=!0;var a=n(22),i=n(8),r=n(18),o=n(10),s=n(26),l=n(5),u=n(25),c=n(19),h=n(17),p=n(27),d=n(24),f=n(23),m=n(7),v=n(9),g=n(0);e.ControlFactory={_splitValues:function(t){return t.values=t.values.split(","),t.displayValues=t.displayValues?t.displayValues.split(","):t.values,t},getControlByMeta:function(t,e){var n=t.controlType;switch(n){case"Input":case"GapValueInput":case"TagInput":return new i["default"](t,e);case"Select":return t=this._splitValues(t),new s["default"](t,e);case"RichText":return new u["default"](t,e);case"Textarea":return new l["default"](t,e);case"Image":return new r["default"](t,e);case"Radio":case"TagRadio":return t=this._splitValues(t),new o["default"](t,e);case"CheckBox":case"TagCheckBox":case"TagCheckbox":return t=this._splitValues(t),new a["default"](t,e);case"RichTagCheckBox":return t=this._splitValues(t),new d["default"](t,e);case"TreeSelect":return t.defaultValue=t.defaultValue?t.defaultValue.split(","):[],new c["default"](t,e);case"TagSelect":return new p["default"](t,e);case"LevelSelect":return new h["default"](t,e);case"DateAbsolute":return t.start=t.start?parseInt(t.start,10):void 0,t.end=t.end?parseInt(t.end,10):void 0,t.gap=t.gap?parseInt(t.gap,10):void 0,new f["default"](t,e);case"Hidden":return new m["default"](t,e);case"ImageBox":return new v["default"](t,e);default:return g.logError(n+" controlType was Illegal"),new i["default"](t,e)}}}},function(t,e,n){"use strict";function a(t,e){if("input"===t.type){var n=e.getControl(t.name);n.showError(null)}else for(var a=0,i=t.eles;a<i.length;a++){var r=i[a],n=e.getControl(r);n.showError(null)}}function i(t,e,n){if("input"===e.type||"skip"===e.type){var a=n.getControl(e.name);a.emit(t,a)}else for(var i=0,r=e.eles;i<r.length;i++){var o=r[i],a=n.getControl(o);a.emit(t,a)}}function r(t){var e=t.tagName;if("input"===e||"skip"===e){var n=t;return{type:e,name:n.name,hidden:n.hidden,eles:[n.name]}}var a=t;return{type:a.tagName,name:a.label,eles:$.map(a.children,function(t){return t.name}),hidden:a.hidden}}function o(t,e){switch(t.type){case"input":var n=e.getControl(t.name);return new l.InputWrapper(t,n,e);case"skip":var n=e.getControl(t.name);return new h.SkipWrapper(t,n,e);case"group":var a=$.map(t.eles,function(t){return e.getControl(t)});return new u.GroupWrapper(t,a,e);case"hidden":var a=$.map(t.eles,function(t){return e.getControl(t)});return new c.HiddenWrapper(t,a,e);default:throw new Error("unknown wrapper type")}}e.__esModule=!0;var s=n(3),l=n(12),u=n(28),c=n(29),h=n(11);e.layoutManager={bindErrorCheckInLayout:a,emitControlEventInLayout:i,generateControlLayout:r,getWrapper:o,defaultWrapper:l.InputWrapper,FORM:s.P_FORM}},function(t,e,n){"use strict";e.__esModule=!0;var a=function(){function t(t){var e=this;this.form=t,t.on("afterControlInit",function(){for(var n=0,a=t.metas;n<a.length;n++){var i=a[n];i.before&&e.bindBefore(i),i.after&&e.bindAfter(i),i.replace&&e.bindReplace(i)}})}return t.prototype.bindBefore=function(t){var e=this.form.getControl(t.name),n=$(t.before);e.onMount(function(){return n.insertBefore(e.$element)}),e.onUnmount(function(){return n.remove()})},t.prototype.bindAfter=function(t){var e=this.form.getControl(t.name),n=$(t.after);e.onMount(function(){return n.insertAfter(e.$element)}),e.onUnmount(function(){return n.remove()})},t.prototype.bindReplace=function(t){var e=this.form.getControl(t.name),n=$(t.before);n.insertBefore(e.$element),e.$element.remove(),e.$element=n},t}();e.HardCode=a},function(t,e,n){"use strict";var a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function a(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}();e.__esModule=!0;var i=n(1),r=n(0),o=function(t){function e(e,n){var a=t.call(this,e,n)||this;return a.meta=e,a.form=n,a.ajaxStream=[],e.dataSource||r.logError("meta.dataSource not set"),n.values[e.name]||a.setValue(),n.on("afterInit",function(){a.$element.on("change",function(t){var n=$(t.target),i=n.data("level"),r=n.val(),o=a.getValue(),s={type:"change",level:i,value:r,allvalues:o};$.getJSON(e.dataSource,s).then(function(t){t&&t.length>0&&(a.ajaxStream.push(t),a.reload())})})}),a}return a(e,t),e.prototype.load=function(t,e){var n=this;void 0===t&&(t=null),void 0===e&&(e=null);var a=this;$.getJSON(a.meta.dataSource,e).then(function(e){n.ajaxStream.push(e),a.reload(),t&&t()})},e.prototype.getValue=function(){var t=[];return this.$element.children().each(function(e,n){var a=$(n);a.prop("disabled")||(t[e]=$(n).val())}),t},e.prototype.setValue=function(t){var e=this;void 0===t&&(t=[]),this.load(function(){for(var n=0;n<t.length;n++){var a=e.$element.children("select[data-level='"+n+"']");a.val(t[n])}},{type:"init",allvalues:t})},e.prototype.setLevelValue=function(t,e){var n=this.$element.children("select[data-level='"+t+"']");n.val(e)},e.prototype.reload=function(){var t=this;if(this.ajaxStream){var e=this.ajaxStream.reduce(function(t,e){for(var n=[],a=0;a<e.length;a++)null!=e[a]?n.push(e[a]):t.length>=a+1&&n.push(t[a]);return n}),n=e.map(function(n){var a=$.inArray(n,e),i=n.map(function(t){var e=t.selected?'selected="selected"':"";return'<option value = "'+t.value+'" '+e+">"+t.label+"</option>"}),r='<select class="input" name="'+t.meta.name+'" data-level = "'+a+'">',o=i.join(""),s="</select>";return r+o+s});if(1==this.ajaxStream.length)$.each(n,function(e,n){var a=$(n);0===a.find("option").length&&a.prop("disabled",!0).hide(),t.$element.append(a)});else for(var a=this.ajaxStream[this.ajaxStream.length-1],i=0;i<a.length;i++){var r=this.$element.children("select[data-level='"+i+"']");a[i]&&(0===a[i].length?r.prop("disabled",!0).hide():(r.prop("disabled",!1).show(),r.replaceWith(n[i])))}this.form.emit("areaChange",this.getValue())}},e.prototype.render=function(){return this.$element?this.$element:this.$element=$('<span class="level-select"></span>')},e.prototype.showErrorMsg=function(t){var e="change.neoform.validate",n=r.sanitizeCSSSelectorText(this.getName());this.$element.off(e).on(e,function(){});var a="em#error-"+n;this.$element.removeClass("error");var i=this.$element.closest(".p-line");if(i.children(a).remove(),t){this.meta;this.$element.addClass("error"),i.append([(o=['<em class="error" id="error-','">'],o.raw=['<em class="error" id="error-','">'],r.h(o,n)),'<i class="error-icon">×</i>',t,"</em>"].join(""));var o}},e}(i.BaseFormControl);e["default"]=o},function(t,e,n){
"use strict";var a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function a(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}();e.__esModule=!0;var i=n(1),r=n(0),o=function(t){function e(e,n){var a=t.call(this,e,n)||this;return a.meta=e,a.form=n,a.id=Math.random().toString(36).substr(2,8),a}return a(e,t),e.prototype._generateImageItem=function(t,e){return $.isPlainObject(t)?$.map(t,function(t,n){return['<li class="postimg-item">',(a=['<input type="hidden" value="','" name="','[]">'],a.raw=['<input type="hidden" value="','" name="','[]">'],r.h(a,n,e)),(i=['<img src="','" class="postimg-item-img">'],i.raw=['<img src="','" class="postimg-item-img">'],r.h(i,t)),'<span class="postimg-item-status">','<input type="button" class="postimg-item-move-forward status-button" value="前移">','<input type="button" class="cover status-button" value="设为封面">','<a class="postimg-status-del" href="javascript:void(0)" title="删除这张图片">x</a>','<input type="button" class="postimg-item-move-backward status-button" value="后移">',"</span>","</li>"].join("");var a,i}).join(""):""},e.prototype._wechatUpload=function(){return['<div class="pull-left imgx-btn-group">','<div class="imgx-btn">','<i class="icon-weixin"></i>','<span class="imgx-label">微信传图</span>',"</div>",(t=['<div id="appUploader_','" class="pull-left uploadbtn app-uploader" data-target="#appUploaderModal_','">从手机上传</div>'],t.raw=['<div id="appUploader_','" class="pull-left uploadbtn app-uploader" data-target="#appUploaderModal_','">从手机上传</div>'],r.h(t,this.id,this.id)),"</div>",(e=['<div id="appUploaderModal_','" class="modal app-uploader-modal hide">'],e.raw=['<div id="appUploaderModal_','" class="modal app-uploader-modal hide">'],r.h(e,this.id)),'<div class="modal-dialog">','<div class="modal-content">','<span class="close" data-dismiss="modal">&times;</span>',(n=['<table id="mbuploaderid_','" class="mbuploaderid">'],n.raw=['<table id="mbuploaderid_','" class="mbuploaderid">'],r.h(n,this.id)),"<tr>","<td>",(a=['<img id="weixinimg_','" class="weixinimg" data-src="/weixin/weixinUploadQrcode?uploaderId=','"/>'],a.raw=['<img id="weixinimg_','" class="weixinimg" data-src="/weixin/weixinUploadQrcode?uploaderId=','"/>'],r.h(a,this.id,this.id)),"</td>",(i=['<td id="appUploaderStatus_','">'],i.raw=['<td id="appUploaderStatus_','">'],r.h(i,this.id)),"<p>请用微信扫描左侧二维码</p>","<small>在微信中批量上传手机中的图片</small>","</td>","</tr>","</table>","</div>","</div>","</div>"].join("");var t,e,n,a,i},e.prototype._imageTip=function(){return this.meta.imageTip?(t=['<img src="','"></img>'],t.raw=['<img src="','"></img>'],r.h(t,this.meta.imageTip)):"";var t},e.prototype.render=function(){var t=this;if(this.$element)return this.$element;var e=this.meta,n=this.getAttr("value")||{},a=e.name,i=this._getControlLayout(a,n),r=$(i);return window.imageConfig=this.meta.param&&this.form.getData(this.meta.param.imageConfig),this.onMount(function(e){r.closest(".p-line").addClass("swfu");var n=r.find(".postimg"),a=window.swfuAddSet?window.swfuAddSet[t.meta.name]:{};a.disabled&&r.closest(".p-line").addClass("uploader-disabled"),t.uploader=new ImgUploader({id:t.id,pickerContainer:r.find(".img-uploader-picker-container")[0],compress:a.compress,fileNumbers:{max:a.number},inputName:t.meta.name+"[]",preview:{container:n[0],statusButtonText:a.message,suffix:a.suffix,thumbSize:a.thumbSize},messageContainer:r.find(".upload-msg")[0],targetStore:a.targetStore||a.vendorName}),a.uploadSuccess&&t.uploader.on("fileUploadSuccess",function(t,e){return a.uploadSuccess(e)}),a.uploadCancel&&t.uploader.on("fileRemoved",function(t){return a.uploadCancel(t)})}),this.$element=r},e.prototype.setValue=function(t){var e=this,n=this.getValue();if(window.ImgUploader){var a=!1,i=t;$.each(i,function(t,n){a=!0,e.uploader.addFile({thumb:n,url:t})});var r=a?"addClass":"removeClass";this.$element.find("ul.postimg")[r]("inline-block")}else{var o=this._generateImageItem(t,this.meta.name),s=this.$element.find("ul.postimg");o?s.addClass("inline-block"):s.removeClass("inline-block"),s.html(o)}JSON.stringify(n)!==JSON.stringify(t)&&this.emit("change")},e.prototype.getValue=function(){var t={};if(!this.$element)return t;var e=this.meta.name;return this.$element.find('input[name="'+e+'[]"]').each(function(e,n){var a=n.value;a&&(t[a]=$(n).next("img").attr("src"))}),t},e.prototype.showTips=function(){var t=this,e=$("<img>");this.onMount(function(){t.$element.find("#jsUploader").append(e)}),this.onUnmount(function(){e.remove()})},e.prototype.showError=function(t){var e=this,n=this.meta.error||"必须上传一张图片";if(t&&"imageUploadError"==t.error&&(n=t.message),"1"!=$("input[name=wanted]:checked").val()){var a="em#error-"+this.getName();this.$element.removeClass("error");var i=this.$element.closest(".p-line");if(i.find(a).remove(),$(document.body).one("imageUploadError",function(t,n){if(n.uploaderId==e.id){var a=/msie/.test(navigator.userAgent.toLowerCase())?"图片上传失败，请使用非ie浏览器，或建议使用【微信传图】，传图更快":"图片上传失败，请检查网络并重新上传，建议图片最大不超过10M";e.showError({error:"imageUploadError",message:a})}}),!t)return;this.$element.addClass("error"),i.find(".publish-detail-item").append([(o=['<em class="error" id="error-','">'],o.raw=['<em class="error" id="error-','">'],r.h(o,this.getName())),'<i class="error-icon">×</i>',n,"</em>"].join("")),$(document.body).one("imageUploadSuccess",function(t,e){e.uploaderId==this.id&&i.children(a).remove()})}var o},e.prototype._getControlLayout=function(t,e){var n=this.meta,a=['<div class="imgx-hint pull-left">','<i class="imgx-hint-icon">?</i>','<div class="imgx-hint-sample">',(s=['<img src="','" title="','" alt="','"></img>'],s.raw=['<img src="','" title="','" alt="','"></img>'],r.h(s,n.urlSample,n.displayName,n.displayName)),"</div>","</div>"].join(""),i=window.swfuAddSet&&window.swfuAddSet[this.meta.name]||{},o=n.note||["<cite>一次最多上传"+(i.number||12)+"张照片（图片格式：jpg/jpeg/png，建议尺寸：440*330px）","<br>",'<a href="//www.baixing.com/a/mobile#fabu" target="_blank">',"下载客户端","</a>，传图更方便","</cite>"].join("");return['<div class="imgx-container clearfix">',(l=['<input type="hidden" name="','[]">'],l.raw=['<input type="hidden" name="','[]">'],r.h(l,t)),(u=['<ul class="postimg clearfix ','" data-id="','">'],u.raw=['<ul class="postimg clearfix ','" data-id="','">'],r.h(u,$.isEmptyObject(e)?"":"inline-block",this.id)),this._generateImageItem(e,t),"</ul>",'<div class="upload-msg"></div>','<div class="clearfix">','<div class="pull-left img-uploader-picker-container imgx-btn-group">','<div class="imgx-btn">','<i class="icon-promotion"></i>',(c=['<span class="imgx-label">',"</span>"],c.raw=['<span class="imgx-label">',"</span>"],r.h(c,n.displayName)),"</div>","</div>",'<div class="jsUploader imgx-btn-group hide pull-left">',(h=['<iframe src="/p/js_uploader.php?imageVendor=upyun&uploaderName=','" frameborder="0" width="124" height="44" scrolling="no"></iframe>'],h.raw=['<iframe src="/p/js_uploader.php?imageVendor=upyun&uploaderName=','" frameborder="0" width="124" height="44" scrolling="no"></iframe>'],r.h(h,t)),"</div>",""+n.cancelWechatUploader=="1"?"":this._wechatUpload(),n.urlSample?a:"","</div>",'<span class="p-note">'+o+"</span>",this._imageTip(),"</div>"].join("");var s,l,u,c,h},e}(i.BaseFormControl);e["default"]=o},function(t,e,n){"use strict";var a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function a(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}();e.__esModule=!0;var i=n(1),r=n(0),o=function(t){function e(e,n){var a=t.call(this,e,n)||this;return a.meta=e,a.form=n,a.skipOpenMenu=!1,a}return a(e,t),e.prototype._prepareSelectTree=function(){for(var t=1,e="",n=[],a=this.meta.name;this.getAttr(e="level"+t);)n.push({element:$((i=['<select class="input">'],i.raw=['<select class="input">'],r.h(i))).attr("name",a+"[]"),data:this.getAttr(e)}),t++;return n;var i},e.prototype._makeOptions=function(t){return $.map(t,function(t){return e=['<option value="','">',"</option>"],e.raw=['<option value="','">',"</option>"],r.h(e,t.value||"",t.label);var e}).join()},e.prototype._bindTreeChangeEvent=function(t){for(var e=this,n=function(n){var a=t[n],i=t[n+1];a.element.on("change",function(){var r,o=$(this).val(),s=n+1;if(o&&"undefined"!=typeof i.data[o]){for(;"undefined"!=typeof(r=t[s]);s++)r.element.detach();i.element.html(e._makeOptions(i.data[o])),a.element.after(i.element)}else for(;"undefined"!=typeof(r=t[s]);s++)r.element.detach()})},a=0;"undefined"!=typeof t[a+1];a++)n(a)},e.prototype.render=function(){var t=this;if(this.$element)return this.$element;var e=this._prepareSelectTree(),n=$('<span class="tree-select"></span>'),a=this.meta.defaultValue,i=e[0].element.html(this._makeOptions(e[0].data));return n.append(i),this._bindTreeChangeEvent(e),this.$element=n,a&&a.length>0&&this.setValue(a),this.events.change&&n.on("change","select",function(){return t.emit("change",t)}),this._bindAutoOpenMenu(),n},e.prototype._bindAutoOpenMenu=function(){var t=this;this.$element.on("change","select",function(){if(t.skipOpenMenu)t.skipOpenMenu=!1;else{var e=$(this).next("select").get(0);setTimeout(function(t){return r.openSelectMenu(e)},10)}})},e.prototype.getValue=function(){if(!this.$element)return this.meta.defaultValue||[];var t=[];return this.$element.find(":selected").each(function(e,n){var a=n.value;a&&t.push(a)}),t},e.prototype.setValue=function(t){for(var e=this.$element,n=0,a=t.length;n<a;n++){var i=t[n],r=e.find("select");this.skipOpenMenu=!0,r.eq(n).val(i).change()}},e}(i.BaseFormControl);e["default"]=o},function(t,e,n){"use strict";e.__esModule=!0;var a=n(38),i="1RAUBxCO9LD0auobX7ytVXzM",r=function(){function t(){this.prepared=!1,this._loadScript()}return t.prototype._loadScript=function(){var t=this;window.HOST_TYPE="https:"===location.protocol?1:0;var e=document.createElement("script");e.src="//api.map.baidu.com/getscript?v=2.0&ak="+i,e.onload=function(){return t._init()},document.body.appendChild(e)},t.prototype._init=function(){"undefined"!=typeof BMap&&(this.Geolocation=new BMap.Geolocation,this.Geocoder=new BMap.Geocoder,this.prepared=!0)},t.prototype.getPosition=function(t,e){this.prepared?this.Geolocation.getCurrentPosition(function(n){n&&n.point?t(n.point):e&&e()}):a["default"].get(function(n,i){i===a["default"].STAT_FAIL?e&&e():t({lat:n.latitude,lng:n.longitude})})},t.prototype.getLocation=function(t,e,n){var a=t.lat,r=t.lng;this.prepared?this.Geocoder.getLocation(new BMap.Point(r,a),function(t){var a=t.addressComponents;t?e({address:{street_number:a.streetNumber,street:a.street,city:a.city,district:a.district},location:t.point,business:t.business}):n()}):$.ajax({type:"get",url:"//api.map.baidu.com/geocoder/v2/",data:{ak:i,location:a+","+r,output:"json",pois:"0"},dataType:"jsonp",jsonp:"callback",jsonpCallback:"GEOCODER_JSONP",success:function(t){var a=t.result,i=t.status;0!=i||0==a.cityCode?n&&n():e({address:a.addressComponent,location:a.location,business:a.business})}})},t.prototype.search=function(t,e,n,a,r){var o=t.lat,s=t.lng;$.ajax({type:"get",url:"//api.map.baidu.com/place/v2/suggestion",data:{ak:i,query:n,region:e,location:o+","+s,output:"json"},dataType:"jsonp",jsonp:"callback",jsonpCallback:"GEOPLACE_JSONP",cache:!0,success:function(t){0!=t.status?r&&r():a(t.result)}})},t}();e.BaiduMap=r},function(t,e,n){"use strict";e.__esModule=!0;var a=function(){function t(t){var e=this;this.form=t,this.deps={},this.refs={},this.info={},this.cache={},t.on("afterInit",function(){e.init()}),window.dep=this}return t.prototype.init=function(){var t=this,e=this.form;e.metas.filter(function(t){return t.relatedMetaNames}).forEach(function(n){var a=n,i=a.name,r=a.datasrc,o=a.dataType;if(e.hasControl(i)){var s=(e.getControl(i),n.relatedMetaNames.split(",").filter(function(t){return e.hasControl(t)}));t.deps[i]=s,t.info[i]={datasrc:r,dataType:o},s.forEach(function(e){t.refs[e]||(t.refs[e]=[]),t.refs[e].push(i)})}}),Object.keys(this.refs).forEach(function(n){var a=e.getControl(n),i=function(){if(!a.isHidden()){var e=a.getValue();e&&t.refs[n].forEach(function(e){return t.trigger(e)})}};a.onChange(i)});var n=e.getLayoutManager().FORM;Object.keys(this.deps).forEach(function(a){var i=e.getControl(a);i.$element.closest(n.LINE).hide(),t.trigger(a)})},t.prototype.trigger=function(t){var e,n=this,a=this.form,i=a.getLayoutManager().FORM,r=a.getControl(t),o=r.meta,s=this.deps[t].map(function(t){return a.getControl(t)}),l={};if(s.some(function(t){return t.isHidden()}))return void r.$element.closest(i.LINE).hide();for(var u=0,c=s;u<c.length;u++){var h=c[u];if(e=h.getValue(),!e)return;var p=h.getName();l[p]=e}var d=this.request(t,o.multideps?l:{parent:e});d.then(function(t){return n.rerender(r,t)})},t.prototype.rerender=function(t,e){var n=this.form,a=n.getLayoutManager().FORM,i=t.meta;if(i.optgroups){var r="__anonymous__";i.optgroups=(u={},u[r]=e,u)}else i.values&&(i.values=e.map(function(t){return t.value}),i.displayValues=e.map(function(t){return t.label}));var o=t.$element;t.$element=null,t.render(),o.replaceWith(t.$element);var s=t.$element.closest(a.LINE);if(e.length)s.show();else{s.hide();var l=t.getName();this.refs[l].forEach(function(t){return n.getControl(t).$element.closest(a.LINE).hide()})}var u},t.prototype.request=function(t,e){var n=this,a=this.info[t],r=a.datasrc,o=a.dataType;e.name=t,e.type=o,r=r||"/autocomplete/subclass/";var s=JSON.stringify(i(e));return this.cache[s]?$.Deferred().resolve(this.cache[s]):$.getJSON(r,e).then(function(t){return n.cache[s]=t})},t}();e.Relation=a;var i=function(t){return Object.keys(t).sort().map(function(e){return{key:e,value:t[e]}})}},function(t,e,n){"use strict";var a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function a(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}();e.__esModule=!0;var i=n(0),r=n(1),o=n(2),s=function(t){function e(e,n){var a=t.call(this,e,n)||this;a.meta=e,a.form=n;var i=a.validators;return e.maxItem&&i.push(o.maxItem(+e.maxItem)),e.minItem&&i.push(o.minItem(+e.minItem)),a}return a(e,t),e.prototype.render=function(){var t=this;if(this.$element)return this.$element;var e=this.getAttr("values"),n=this.getAttr("displayValues")||e,a=this.meta.name,r=this.meta.value||this.meta.defaultValue||[],o=$.map(e,function(t,e){var o=$.inArray(t,r)>=0?"checked":"",s=n[e];return l=['<label class="form-label"><input type="checkbox" name="','[]" value="','" class="checkbox-radio" ',">","</label>"],l.raw=['<label class="form-label"><input type="checkbox" name="','[]" value="','" class="checkbox-radio" ',">","</label>"],i.h(l,a,t,o,s);var l}).join("");if(h=['<input type="hidden" name="','">'],h.raw=['<input type="hidden" name="','">'],o=i.h(h,a)+o,e.length>5){var s=this.form.values[a]||"",l=void 0;l="string"==typeof s?s.split(",").length>=e.length?"全部取消":"全选":$.map(s,function(t){return t}).length>=e.length?"全部取消":"全选",p=['<span class="form-label">\n\t\t\t\t<a class="select-all" href="javascript:void(0)">',"</a>\n\t\t\t</span>"],p.raw=['<span class="form-label">\n\t\t\t\t<a class="select-all" href="javascript:void(0)">',"</a>\n\t\t\t</span>"],o+=i.h(p,l)}var u=$('<div class="checkbox-wrapper">'+o+"</div>"),c=u.find(".select-all");return this.events.change&&u.on("change","input",function(){t.getValue().length>=e.length?c.text("全部取消"):c.text("全选"),t.emit("change",t)}),c.on("click",function(n){var a="全选"===c.text()?e:[];t.setValue(a),c.text("全选"===c.text()?"全部取消":"全选")}),this.$element=u;var h,p},e.prototype.getValue=function(){var t=[];return this.$element.find(":checked").each(function(e,n){return void t.push(n.value)}),t},e.prototype.setValue=function(t){var e=this,n=this.getValue().sort().toString();"string"==typeof t&&(t=t.split(",")),$.isArray(t)||(t=$.map(t,function(t){return t})),this.$element.find("input[type=checkbox]").prop("checked",!1),$.each(t,function(t,n){e.$element.find('[value="'+n+'"]').prop("checked",!0)});var a=t.slice().sort().toString();a!==n&&this.emit("change")},e}(r.BaseFormControl);e["default"]=s},function(t,e,n){"use strict";function a(t,e,n){t=t||u,e=e||l,n=n||1;var a=new Array(Math.floor((e-t+1)/n));return $.map(a,function(e,a){return t+a*n})}var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function a(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}();e.__esModule=!0;var r=n(0),o=n(1),s=n(2),l=(new Date).getFullYear(),u=l-70,c="active",h=function(t){function e(e,n){var a=t.call(this,e,n)||this;return a.meta=e,a.form=n,a.dateSet={},a.isMenuVisible=!1,a.placeholder="请选择"+a.meta.name||"年份",e.required&&a.validators.push(s.dateRequired),n.on("afterInit",function(){var t=$("body"),e=a.$element;t.on("click",".js-ds-get-option",function(t){var n=!e.find(t.target)[0];if(!n){var i=$(t.target),r=i.parents(".js-ds-level-list"),o=e.find(".js-ds-level-list"),s=$();i.addClass(c).siblings().removeClass(c),0===r.index()?(a.dateSet.year=i.data("ds-value"),s=o.eq(r.index()+1),s&&s.show()):(a.dateSet.month=i.data("ds-value"),a._toggleMenu(!1),a.setValue([a.dateSet.year,a.dateSet.month]))}}),t.on("click",".js-de-get-specifiedOption",function(t){var n=!e.find(t.target)[0];if(!n){var i=$(t.target);i.addClass(c).siblings().removeClass(c),e.find(".js-ds-level-list").eq(1).hide(),a._toggleMenu(!1),a.setValue([-1,-1])}}),t.on("click",function(t){var n=!!e.find(t.target)[0];n||a._toggleMenu(!1)}),t.on("click",".js-ds-close",function(){a._toggleMenu(!1)}),t.on("click",".js-ds-selection",function(){a._toggleMenu(!a.isMenuVisible)})}),a}return i(e,t),e.prototype._toggleMenu=function(t){this.isMenuVisible=t;var e=this.$element.find(".js-ds-get-group");this.isMenuVisible?e.show():e.hide()},e.prototype.render=function(){var t=this,e=this.meta,n=e.name,i=a(e.start,e.end,e.gap);""+e.asce!="0"&&i.reverse();var o=[(h=['<input type="hidden" name="','[0]">'],h.raw=['<input type="hidden" name="','[0]">'],r.h(h,n)),(p=['<input type="hidden" name="','[1]">'],p.raw=['<input type="hidden" name="','[1]">'],r.h(p,n))].join(""),s=e.specifiedOption?(d=['\n\t\t\t<li class="level-option js-de-get-specifiedOption" data-ds-value=',">\n\t\t\t\t","\n\t\t\t</li>\n\t\t"],d.raw=['\n\t\t\t<li class="level-option js-de-get-specifiedOption" data-ds-value=',">\n\t\t\t\t","\n\t\t\t</li>\n\t\t"],r.h(d,e.specifiedOption,e.specifiedOption)):"";s+=$.map(i,function(t){return e=['<li class="level-option js-ds-get-option" data-ds-value=',">","年</option>"],e.raw=['<li class="level-option js-ds-get-option" data-ds-value=',">","年</option>"],r.h(e,t,t);var e}).join("");var l=$.map(a(1,12,1),function(t){return e=['<li class="level-option js-ds-get-option" data-ds-value=',">","月</option>"],e.raw=['<li class="level-option js-ds-get-option" data-ds-value=',">","月</option>"],r.h(e,t,t);var e}).join(""),u=[o,"<div>",'<div class="level-selection js-ds-selection">','<div class="level-placeholder js-ps-set-value">',this.placeholder,"</div>",'<i class="icon icon-arrow-down level-arrow"></i>',"</div>",'<div class="level-group loaded js-ds-get-group">','<div class="level-list js-ds-level-list">','<div class="level-title">',"请选择年份","</div>",'<div class="level-option-list-wrap">','<ul class="level-option-list">',s,"</ul>","</div>","</div>",'<div class="level-list js-ds-level-list">','<div class="level-title">',"请选择月份","</div>",'<div class="level-option-list-wrap">','<ul class="level-option-list">',l,"</ul>","</div>","</div>",'<i class="level-close js-ds-close">×</i>',"</div>","</div>"].join(""),c=$(u);return this.onMount(function(){var t=c.closest(".p-line");t.addClass("date-select")}),c.on("change",function(){return t.emit("change",t)}),this.$element=c;var h,p,d},e.prototype.resetValue=function(){var t=this.$element;t.eq(0).val(""),t.eq(1).val(""),t.find(".js-ps-set-value").html(this.placeholder),t.find(".js-ds-get-option").removeClass(c),this.emit("change",this)},e.prototype.setValue=function(t){if(t){if("-10-101"===t.toString()&&(t=[-1,-1]),"string"==typeof t){var e=t;if(t=t.match(/(\d{4})年(\d{1,2})月/),!t)return void r.logError("Malformed date!"+e);t.shift(),t=[+t[0],+t[1]]}var n=this.$element;n.eq(0).val(""+t[0]),n.eq(1).val(""+t[1]),n.find(".js-ps-set-value").html(+t[0]<0||+t[1]<0?this.meta.specifiedOption||"已过期":t[0]+"年"+t[1]+"月"),this.emit("change",this)}},e.prototype.getValue=function(){var t=this.$element;return[+t.eq(0).val(),+t.eq(1).val()]},e}(o.BaseFormControl);e["default"]=h},function(t,e,n){"use strict";var a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function a(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}();e.__esModule=!0;var i=n(0),r=n(1),o=n(2),s=function(t){function e(e,n){var a=t.call(this,e,n)||this;a.meta=e,a.form=n,a.optgroups=[];var i=a.validators;return e.maxItem&&i.push(o.maxItem(+e.maxItem)),e.minItem&&i.push(o.minItem(+e.minItem)),n.on("areaChange",function(t){a.optgroups=t,a.reload()}),a}return a(e,t),e.prototype.render=function(){if(this.$element)return this.$element;var t=this.meta.maxItem,e=parseInt(t)>0?(r=['<div class="selected-labels"><span>最多可选<label>',"</label>项</span></div>"],r.raw=['<div class="selected-labels"><span>最多可选<label>',"</label>项</span></div>"],i.h(r,t)):(o=['<div class="selected-labels"><span>可多选</span></div>'],o.raw=['<div class="selected-labels"><span>可多选</span></div>'],i.h(o)),n=this.meta.name,a=e+(s=['<div class="checkbox-options"><input type="hidden" name="','"></div>'],s.raw=['<div class="checkbox-options"><input type="hidden" name="','"></div>'],i.h(s,n));return this.$element=$('<div class="tag-checkbox-wrapper">'+a+"</div>"),this.bindEvent(),this.$element;var r,o,s},e.prototype.reload=function(){var t=this._build();this.$element.html(""+t)},e.prototype._build=function(){var t=this.optgroups,e=this.meta.maxItem,n=this.meta.name,a=this.form.values[this.meta.name]||this.meta.defaultValue||[],r="",o="";$.ajaxSettings.async=!1,$.getJSON(this.meta.dataSource,{type:"init",allvalues:t}).then(function(t){o=$.map(t,function(t,e){var r=t.value,o=t.label,s=$.inArray(r,a)>=0?"checked":"";return r?(l=['<label class="checkbox-label ','" data-label="','"><input type="checkbox" name="','[]" value="','" class="checkbox-radio" ',">","</label>"],l.raw=['<label class="checkbox-label ','" data-label="','"><input type="checkbox" name="','[]" value="','" class="checkbox-radio" ',">","</label>"],i.h(l,s?"active":"",o,n,r,s,o)):"";var l}).join(""),r=$.map(t,function(t,e){var n=t.value,r=t.label,o=$.inArray(n,a)>=0?"checked":"";return o&&n&&r?(s=['<label class="selected-label" data-value="','">'," &times;</label>"],s.raw=['<label class="selected-label" data-value="','">'," &times;</label>"],i.h(s,n,r)):"";var s}).join("")}),$.ajaxSettings.async=!0;var s=parseInt(e)>0?(l=["<span>最多可选<label>","</label>项</span>"],l.raw=["<span>最多可选<label>","</label>项</span>"],i.h(l,e)):(u=["<span>可多选</span>"],u.raw=["<span>可多选</span>"],i.h(u));return c=['<div class="selected-labels">'],c.raw=['<div class="selected-labels">'],i.h(c)+r+s+(h=["</div>"],h.raw=["</div>"],i.h(h))+(p=['<div class="checkbox-options"><input type="hidden" name="','">'],p.raw=['<div class="checkbox-options"><input type="hidden" name="','">'],i.h(p,n))+o+"</div>";var l,u,c,h,p},e.prototype.getValue=function(){var t=[];return this.$element.find(":checked").each(function(e,n){return void t.push(n.value)}),t},e.prototype.setValue=function(t){var e=this,n=this.getValue().sort().toString();"string"==typeof t&&(t=t.split(",")),$.isArray(t)||(t=$.map(t,function(t){return t})),this._removeChoice(this.$element.find("input[type=checkbox]").prop("checked",!1)),$.each(t,function(t,n){e._addChoice(e.$element.find('[value="'+n+'"]').prop("checked",!0))});var a=t.slice().sort().toString();a!==n&&this.emit("change")},e.prototype.bindEvent=function(){var t=this;this.$element.on("change","input[type=checkbox]",function(e){t._chooseElement($(e.target))}),this.$element.on("click",".selected-label",function(e){var n=$(e.target).data("value"),a=t.$element.find('input[value="'+n+'"]');a.prop("checked",!1).change(),t._chooseElement(a)})},e.prototype._chooseElement=function(t){t.prop("checked")?this._addChoice(t):this._removeChoice(t)},e.prototype._removeChoice=function(t){var e=t.closest("label");e.removeClass("active");var n=t.val(),a=this.$element.find('.selected-label[data-value="'+n+'"]');a.remove()},e.prototype._addChoice=function(t){var e=t.closest("label");e.addClass("active");var n=t.val(),a=$.trim(e.data("label")),r=this.$element.find(".selected-labels span");r.before((o=['<label class="selected-label" data-value="','">'," &times;</label>"],o.raw=['<label class="selected-label" data-value="','">'," &times;</label>"],i.h(o,n,a)));var o},e}(r.BaseFormControl);e["default"]=s},function(t,e,n){"use strict";var a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function a(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}();e.__esModule=!0;var i=n(5),r=n(0),o={tag:{p:!0,span:!0,strong:!0,em:!0,br:!0,div:"p",b:"strong",i:"em",h1:"strong",h2:"strong",h3:"strong",h4:"strong",h5:"strong",h6:"strong"},style:{"font-size":!0,color:!0,"background-color":!0,"text-decoration":!0}},s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.render=function(){var t=this;if(this.$element)return this.$element;var e=this.meta.name,n=this.meta.value||this.meta.defaultValue||"";n&&(this.initValue=n.split("\n").map(function(t){return e=["<p>","</p>"],e.raw=["<p>","</p>"],r.h(e,t);var e}).join(""));var a=$([(o=["<textarea class='input' name='","' id=\"richtext-",'"\n\t\t\t\tplaceholder="','" maxlength="','" size="','"\n\t\t\t\tstyle="width:390px;height:115px"></textarea>'],o.raw=["<textarea class='input' name='","' id=\"richtext-",'"\n\t\t\t\tplaceholder="','" maxlength="','" size="','"\n\t\t\t\tstyle="width:390px;height:115px"></textarea>'],r.h(o,e,e,this.meta.placeholder,this.meta.maxlength,this.meta.size)),(s=['<input type="hidden" name="hasrich','" value="1">'],s.raw=['<input type="hidden" name="hasrich','" value="1">'],r.h(s,e))].join("")),i=function(){UE.ui.PastePicker=null,t.editor=UE.getEditor("richtext-"+e,{toolbars:[["undo","redo","|","fontsize","bold","italic","underline","forecolor","backcolor"]],maxUndoCount:20,maximumWords:5e3,customDomain:!0}),t.editor.addListener("contentChange",function(){t.editor.sync(),t.emit("change",t)}),t.editor.addListener("ready",function(){t.$element=$("#richtext-"+e).add(t.$element),t.initValue&&t.editor.setContent(t.initValue),t.editor.addInputRule(function(e){t.filterInput(e)})}),t.editor.addListener("contentChange",function(){t.editor.getContentLength(!0)||3==t.editor.selection.getRange().startContainer.nodeType||t.editor.ui.toolbars[0].items.map(function(t){return t.onpicknocolor&&t.onpicknocolor()})})};return this.once("mount",function(){"undefined"!=typeof UE?i():t.loadScripts(i)}),this.$element=a;var o,s},e.prototype.onChange=function(t){return this.on("change",t)},e.prototype.setValue=function(t){this.initValue=t,this.editor?this.editor.setContent(t):(t=$("<div></div>").html(t).text(),this.$element.eq(0).val(t))},e.prototype.getValue=function(){return this.editor?this.editor.getPlainTxt():this.$element.eq(0).val()},e.prototype.loadScripts=function(t){window.UEDITOR_HOME_URL="//s.baixing.net/ueditor/",$.ajax({url:"//s.baixing.net/ueditor/ueditor.min.3aeaeaec.js",dataType:"script",cache:!0}).always(function(){return t(UE)})},e.prototype.filterInput=function(t){var e=this;t.traversal(function(n){if(n.tagName){var a=o.tag[n.tagName];if(!a||"br"!==n.tagName&&!n.firstChild())return void e.filterInvalidNode(n,t);"span"===n.tagName&&t.children.length<=1?e.filterSingletonSpan(n,t):a!==!0&&(n.tagName=a)}e.filterStyle(n),e.filterInput(n)})},e.prototype.filterSingletonSpan=function(t,e){if(e||(e=t.parentNode),"span"===e.tagName){var n=t.getAttr("style");e.removeChild(t,!0),n&&(this.filterStyle(t),";"!==n.substr(-1)&&(n+=";"),e.setAttr("style",n+(e.getAttr("style")||"")))}else if("strong"===e.tagName||"em"===e.tagName){t.tagName=e.tagName,e.tagName="span";var n=t.getAttr("style");n&&(this.filterStyle(t),e.setAttr("style",n),t.setAttr("style",!1)),this.filterSingletonSpan(e)}},e.prototype.filterInvalidNode=function(t,e){e||(e=t.parentNode);var n=t.previousSibling();e.removeChild(t),e.firstChild()?n&&"span"===n.tagName&&e.children&&1==e.children.length&&this.filterSingletonSpan(n,e):this.filterInvalidNode(e)},e.prototype.filterStyle=function(t){var e=t.getAttr("style");if(e){e=e.replace(/&quot;/g,'"').split(";");var n=t.getStyle("background");t.setAttr("style",e.filter(function(t){return t&&o.style[t.split(":")[0].trim()]}).join(";")),n&&!/url\s*\(/.test(n)&&t.setStyle("background-color",n);var a=t.getStyle("font-size");a&&parseInt(a)>36&&t.setStyle("font-size","36px")}},e}(i["default"]);e["default"]=s},function(t,e,n){"use strict";var a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function a(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}();e.__esModule=!0;var i=n(0),r=n(1),o=function(t){function e(e,n){var a=t.call(this,e,n)||this;return a.meta=e,a.form=n,a}return a(e,t),e.prototype.render=function(){var t=this;if(this.$element)return this.$element;var e=this.meta,n=e.name,a=this.meta.size?"input-"+this.meta.size+" input":"input",r=this.getAttr("displayName"),o=$((c=["<select class='","' name='","'/>"],c.raw=["<select class='","' name='","'/>"],i.h(c,a,n)));if("1"===e.defaultDisplayName){var s=this.meta.placeholder||"请选择"+r;o.append((h=['<option value="">',"</option>"],h.raw=['<option value="">',"</option>"],i.h(h,s))),o.addClass("placeholder"),o.one("focus",function(){o.find("option").eq(0).prop("disabled",!0)}).one("change",function(){o.removeClass("placeholder")})}var l=e.displayValues||e.values,u=$.map(e.values,function(t,n){var a=(e.value||e.defaultValue)===t,r=l[n];return $((o=['<option value="','">',"</option>"],o.raw=['<option value="','">',"</option>"],i.h(o,t,r))).prop("selected",a);var o});return o.append(u),this.onMount(function(){t.$element.closest(".publish-detail-item").addClass("select-wrapper")}),this.events.change&&o.on("change",function(){return t.emit("change",t)}),this.$element=o;var c,h},e.prototype.setValue=function(e){this.meta.unit&&(e=e.replace(this.meta.unit,"")),e&&this.$element.removeClass("placeholder"),t.prototype.setValue.call(this,e)},e}(r.BaseFormControl);e["default"]=o},function(t,e,n){"use strict";var a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function a(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}();e.__esModule=!0;var i=n(0),r=n(1),o="__anonymous__",s=function(t){function e(e,n){var a=t.call(this,e,n)||this;return a.meta=e,a.form=n,a}return a(e,t),e.prototype.render=function(){var t=this;if(this.$element)return this.$element;var e=this.meta,n=e.name,a=this.getAttr("displayName"),r=$((s=["<select class='input input-6' name='","'/>"],
s.raw=["<select class='input input-6' name='","'/>"],i.h(s,n)));"1"===e.defaultDisplayName?r.append((l=['<option value="">请选择',"</option>"],l.raw=['<option value="">请选择',"</option>"],i.h(l,a))):r.append((u=['<option value=""></option>'],u.raw=['<option value=""></option>'],i.h(u))),r.addClass("placeholder");var o=this._buildOptions();return r.append(o),this.onMount(function(){t.$element.closest(".publish-detail-item").addClass("select-wrapper")}),this.events.change&&r.on("change",function(){return t.emit("change",t)}),r.one("change",function(){r.removeClass("placeholder"),r.find("option").eq(0).prop("disabled",!0)}),this.$element=r;var s,l,u},e.prototype._buildOptions=function(){var t=this,e=this.meta;return $.map(e.optgroups,function(e,n){var a=$.map(e,function(e){return t._buildOneOption(e)});return n==o?a:$((r=['<optgroup label="--','--"></optgroup>'],r.raw=['<optgroup label="--','--"></optgroup>'],i.h(r,n))).append(a);var r})},e.prototype._buildOneOption=function(t){var e=this.meta,n=(e.value||e.defaultValue)===t.value;return $((a=['<option value="','">',"</option>"],a.raw=['<option value="','">',"</option>"],i.h(a,t.value,t.label))).prop("selected",n);var a},e.prototype.setValue=function(t){var e=this.$element.val();this.$element.val(t),e!==t&&this.$element.change()},e}(r.BaseFormControl);e["default"]=s},function(t,e,n){"use strict";e.__esModule=!0;var a=n(6),i=n(13),r=n(0),o=function(){function t(t,e,n){this.layout=t,this.controls=e,this.form=n,this._tabHandler=null,this._changeHandler=null}return t.prototype.wrap=function(){for(var t=this.form.getLayoutManager().FORM,e=!1,n=[],i=this.layout.hidden&&!this.form.isEdit,r=i?"pline-hide":"",o=0,s=this.controls;o<s.length;o++){var l=s[o];e=e||l.getAttr("required");var u=a.connector(l);u&&n.push(u),n.push(l.render());var c=a.unit(l,t);c&&n.push(c)}var h=this.layout.name,p=$('<label class="p-label"></label>').text(h+"：");e&&p.prepend('<span class="required">*</span>');var d=$('<div class="p-line group-wrapper">').append(p,$('<div class="publish-detail-item">')).addClass(r);return d.find("div").append(n),this._element=d,d},t.prototype.bind=function(){},t.prototype.unbind=function(){},t.prototype._findParentLayout=function(t){},t}();e.GroupWrapper=o,r.applyMixin(o,i.WrapperAutoHidingMixin)},function(t,e,n){"use strict";e.__esModule=!0;var a=n(12),i=function(){function t(t,e,n){this.layoutConfig=t,this.controls=e,this.form=n,this.isShow=n.isEdit}return t.prototype.wrap=function(){if(0===this.controls.length)return $("");for(var t=this.isShow?"button-hide":"button-show",e=$("\n\t\t  <div id='moreinfo' class='separate "+t+"'>\n\t\t\t<a class='pull-right' href='#'>\n\t\t\t\t<span class='button-hide'>\n\t\t\t\t\t<i class='icon-minus'> 收起</i>\n\t\t\t\t</span>\n\t\t\t\t<span class='button-show'>\n\t\t\t\t\t<i class='icon-plus'> 展开</i>\n\t\t\t\t</span>\n\t\t\t</a>\n\t\t\t补充信息<small>（填写更多信息，获得更好推广效果！）</small>\n\t\t  </div>\n\t\t"),n=$(),i=0,r=this.controls;i<r.length;i++){var o=r[i],s=o.getName(),l={type:"input",name:s,eles:[s]},u=new a.InputWrapper(l,o,this.form).wrap();this.isShow||u.hide(),n=n.add(u)}return e.on("click",function(t){t.preventDefault(),e.toggleClass("button-hide button-show"),e.hasClass("button-hide")?n.show():n.hide()}),e.add(n)},t.prototype.bind=function(){},t.prototype.unbind=function(){},t}();e.HiddenWrapper=i},,function(t,e,n){"use strict";e.__esModule=!0;var a=function(){function t(e){var n=this;this.form=e,this.controls=[],this.source={},this.records={},this.information={},this.$$records={},this.$$information={},e.once("afterInit",function(){e.getData("imports.isEdit")||(n.init(),e.on("afterTabChange",function(){n.switchTab(),n.init()}))}),t.instance=this}return t.prototype.collect=function(t,e,n){for(var a=this.information,i=0,r=Object.keys(t);i<r.length;i++){var o=r[i];!e&&a[o]||(a[o]=t[o])}n||this.generate()},t.prototype.mount=function(t){var e=this;this.collectFromControl(t,!0),t.onChange(function(){return e.collectFromControl(t)})},t.prototype.dispose=function(t){if(t.meta.autofill){var e=t.getName();this.controls.some(function(t){return t.getName()==e})||(this.records[e]=t.getValue(),this.controls.push(t))}},t.prototype.init=function(){var t=this,e=this.form,n=e.metas.map(function(t){return t.name}),a=[];e.metas.filter(function(t){return t.autofill}).forEach(function(i){t.source[i.name]=i.autofill.match(/\{.+?\}/g).map(function(t){var e=t.match(/\{(.+?):(.+)\}/),i=(e[0],e[1]),r=e[2];return n.indexOf(i)>=0&&a.push(i),{key:i,value:r}});var r=e.getControl(i.name);t.dispose(r)}),a.map(function(n){return t.mount(e.getControl(n))})},t.prototype.generate=function(){var t=this,e=this.information,n=[];this.controls.forEach(function(a){var i=a.getName(),r=a.getValue(),o=t.records[i];if(r&&o&&r!=o)return window.tracker&&tracker.evt("fabu_auto",{op:"content_modified"}),void n.push(i);var s=t.source[i].map(function(t){if("*"==t.key)return t.value;var n=Array.isArray(e[t.key])?e[t.key].join("、"):e[t.key];return n?t.value.replace("__",n):""}).join("");a.setValue(s),t.records[i]=a.getValue(),s&&a.$element.trigger("change")}),this.controls=this.controls.filter(function(t){return n.indexOf(t.getName())<0})},t.prototype.switchTab=function(){var t=this;e=[this.$$information,this.information],this.information=e[0],this.$$information=e[1],n=[this.$$records,this.records],this.records=n[0],this.$$records=n[1],this.controls.forEach(function(e){e.setValue(t.records[e.getName()])});var e,n},t.prototype.collectFromControl=function(t,e){var n=this,a=t.getName(),i=t.getValue();if(!t.isHidden()){t.meta.id&&(i=Array.isArray(i)?i.map(function(t){return n.convertNode2Text(t)}).join(""):this.convertNode2Text(i)),this.collect((r={},r[a]=i,r),!0,e);var r}},t.prototype.convertNode2Text=function(t){if(!t)return t;var e=$('[value="'+t+'"]');return e.is('[type="checkbox"],[type="radio"]')&&(e=$(e[0].nextSibling)),e.text()},t}();e.AutoFill=a},function(t,e,n){"use strict";function a(t){var e=t.address;return{address:e.street+e.street_number,district:e.district,region:t.business,location:t.location}}function i(t){return{address:t.name,district:t.district,region:t.business,location:t.location,code:t.cityid}}e.__esModule=!0;var r=n(0),o=n(20),s=function(){function t(t){var e=this;if(this.fetching=!1,t.metas.filter(function(t){return"具体地点"===t.name}).length){var n=t.getLayoutManager().FORM;t.once("afterTabChange",function(){e.city=t.getData("imports.cityCName"),e.detailControl=t.getControl("具体地点");try{e.areaControl=t.getControl("地区")}catch(a){}var i=e.detailControl.$element.closest(n.CTRL);e.$lat=$('<input type="hidden" name="lat">'),e.$lng=$('<input type="hidden" name="lng">'),e.$geoCity=$('<input type="hidden" name="geoCity">'),i.before([e.$lat.get(0),e.$lng.get(0),e.$geoCity.get(0)]);var o=t.getData("imports.firstCategory");"fang"!==o&&(e.$button=e._createButton(n),i.before(e.$button)),e.areaControl&&(e.$overlay=e._createOverlay(n),i.after(e.$overlay),e.detailControl.$element.on("focus",function(){e.$overlay.show(),e._initOverlay(),r.lockScroll(e.areaControl.$element.closest(n.LINE).offset().top)}).on("input",r.debounce(function(t){return e._suggestAddresses(t.target.value)},300).bind(e)))}),t.on("afterInit",function(){e.api=new o.BaiduMap})}}return t.prototype._createButton=function(t){var e=this;return $('<div id="autogeol" class="'+t.CLS_CTRL+'"><span class="icon-location"></span></div>').on("click",function(){return e._getLocation(function(t){e.$overlay.hide(),r.releaseScroll(!0),e._setAddress(a(t))})})},t.prototype._createOverlay=function(t){var e=this,n=this.detailControl.$element.closest(t.LINE).height(),o=$(window).height()-n;this.areaControl&&(o-=this.areaControl.$element.closest(t.LINE).height());var s=$('<div id="address-overlay" class="'+t.CLS_CTRL+'">\n\t\t\t\t<div class="current"></div>\n\t\t\t\t<div class="suggestions"></div>\n\t\t\t\t<div class="close">完成</div>\n\t\t\t</div>').css("height",o).on("click",function(t){var n=$(t.target).closest(".address");if(n.length)if(n.parent().hasClass("current"))e._setAddress(a(e.geoData));else{var o=n.index();e._setAddress(i(e.suggestions[o]))}e.$overlay.hide(),r.releaseScroll(!0)});return s},t.prototype._initOverlay=function(){var t=this;this.geoData||this._getLocation(function(e){var n=e.address;t.$overlay.find(".current").append(t._addressHTML(n.street+n.street_number,n.city+n.district,!0))})},t.prototype._suggestAddresses=function(t){var e=this;!this.fetching&&this.geoData&&(this.fetching=!0,this.api.search(this.geoData.location,this.city||this.geoData.address.city,t,function(t){e.fetching=!1,e.suggestions=t;var n=e.$overlay.find(".suggestions").empty();t.forEach(function(t){n.append(e._addressHTML(t.name,t.city+t.district))})},function(){e.fetching=!1}))},t.prototype._getLocation=function(t){var e=this;if(!this.fetching){if(this.geoData)return void t(this.geoData);this.fetching=!0,this.api.getPosition(function(n){var a=n.lat,i=n.lng;e.api.getLocation({lat:a,lng:i},function(n){e.fetching=!1,e.geoData=n,t(n)},function(){e.fetching=!1,e._showToast("定位失败！")})},function(){e.fetching=!1,e._showToast("定位失败！")})}},t.prototype._setAddress=function(t){var e=t.address,n=t.district,a=t.region,i=t.location,r=t.code;if(this.detailControl.setValue(e),this.detailControl.validate(),i&&i.lat&&(this.$lat.val(i.lat),this.$lng.val(i.lng)),r&&this.$geoCity.val(r),this.areaControl){var o=this.areaControl.getAttr("level1"),s=this.areaControl.getAttr("level2"),l=o.filter(function(t){return n.indexOf(t.label)>=0}).map(function(t){return t.value});if(l.length){s=s[l[0]];for(var u in s)if(s.hasOwnProperty(u)){var c=s[u];if(a.indexOf(c.label)>=0){l.push(c.value);break}}this.areaControl.setValue(l)}}},t.prototype._showToast=function(t,e){void 0===e&&(e=1500);var n=$("#toast");n.length||(n=$('<div id="toast">').appendTo(document.body)),n.text(t).show().animate({opacity:1}),setTimeout(function(){n.animate({opacity:0},300,"linear",function(){return n.hide()})},e)},t.prototype._addressHTML=function(t,e,n){void 0===n&&(n=!1);var a=n?'<span class="highlight">[当前]</span> ':"";return'<div class="address">\n\t\t\t\t<span class="description">'+a+t+'</span>\n\t\t\t\t<span class="district">'+e+"</span>\n\t\t\t</div>"},t}();e.GeoLocation=s,e.geoData2Address=a,e.suggestion2Address=i},function(t,e,n){"use strict";function a(t,e,n){void 0===n&&(n=!1),$.map(t,function(t){!n&&t.getValue()&&t.getValue()[0]||t.$element.closest(e.LINE).hide()})}function i(t,e,n){var a=$();$.map(t,function(t){a=a.add(t.$element.parents(e.LINE))}),n?a.show():a.hide()}function r(t,e){for(var n=t.validators.length-1;n>=0;n--){if(t.validators[n]===u.required)return;if(t.validators[n]===u.optional){t.validators.splice(n,1);break}}t.validators.push(u.required),s(t.$element.closest(e.LINE).find(e.LABEL),e)}function o(t,e){for(var n=t.validators.length-1;n>=0;n--)t.validators[n]!==u.required&&t.validators[n]!==u.optional||(t.validators.splice(n,1),l(t.$element.closest(e.LINE).find(e.LABEL),e))}function s(t,e){l(t,e),t.prepend(e.DOM_REQUIRED)}function l(t,e){t.find(e.REQUIRED)[0]&&t.find(e.REQUIRED).remove()}e.__esModule=!0;var u=n(2);e.hideControls=a,e.makeInputChained=i,e.addRequiredToValidators=r,e.removeRequiredFromValidators=o,e.addStarToRow=s,e.removeStarFromRow=l},,,function(t,e,n){"use strict";e.__esModule=!0;var a=n(32),i=n(0),r=n(20),o=function(){function t(t){var e=this;if(this.form=t,this.fetching=!1,t.metas.filter(function(t){return"具体地点"===t.name}).length){var n=t.getLayoutManager().FORM;t.once("afterTabChange",function(){e.city=t.getData("imports.cityCName"),e.detailControl=t.getControl("具体地点");try{e.areaControl=t.getControl("地区")}catch(a){}var r=e.detailControl.$element.closest(n.CTRL);e.$lat=$('<input type="hidden" name="lat">'),e.$lng=$('<input type="hidden" name="lng">'),e.$geoCity=$('<input type="hidden" name="geoCity">'),r.before([e.$lat.get(0),e.$lng.get(0),e.$geoCity.get(0)]),e.$button=e._createButton(n),e.detailControl.$element.after(e.$button),e.areaControl&&(e.$overlay=e._createOverlay(n),e.detailControl.$element.after(e.$overlay),e.detailControl.$element.on("focus",function(){e.geoData||e._getLocation(i.NOOP)}).on("input",i.debounce(function(t){e._suggestAddresses(t.target.value)},300).bind(e)).attr("autocomplete","off"))}),t.on("afterInit",function(){e.api=new r.BaiduMap})}}return t.prototype._createButton=function(t){var e=this;return $('<div id="autogeol" class="btn-grey"><i class="icon-location"></i> 自动获取</div>').on("click",function(){return e._getLocation(function(t){e._setAddress(a.geoData2Address(t)),e.$overlay&&e.$overlay.hide()})})},t.prototype._createOverlay=function(t){var e=this,n=$('<div id="address-overlay"></div>');return $(document.body).on("click",function(n){var i=e.detailControl.$element.closest(t.CTRL).get(0);if(!$.contains(i,n.target))return void e.$overlay.hide();var r=$(n.target).closest(".address");if(r.length){var o=r.index();e._setAddress(a.suggestion2Address(e.suggestions[o])),e.$overlay.hide()}}),n},t.prototype._suggestAddresses=function(t){var e=this;!this.fetching&&this.geoData&&(this.fetching=!0,this.api.search(this.geoData.location,this.city||this.geoData.address.city,t,function(t){e.fetching=!1,e.suggestions=t;var n=e.$overlay.empty();t.forEach(function(t){n.append(e._addressHTML(t.name,t.city+t.district))}),t.length?e.showOverlay():e.$overlay.hide()},function(){e.fetching=!1}))},t.prototype.showOverlay=function(){var t=this.form.getLayoutManager().FORM;if(this.$overlay.is(":hidden")){var e=0,n=this.detailControl.$element.offset(),a=this.detailControl.$element.closest(t.CTRL).offset();n&&a&&(e=n.left-a.left),this.$overlay.css("left",e).show()}},t.prototype._getLocation=function(t){var e=this;if(!this.fetching){if(this.geoData)return void t(this.geoData);this.fetching=!0,this.api.getPosition(function(n){var a=n.lat,i=n.lng;e.api.getLocation({lat:a,lng:i},function(n){e.fetching=!1,e.geoData=n,t(n)},function(){e.fetching=!1,e.$button.remove()})},function(){e.fetching=!1,e.$button.remove()})}},t.prototype._setAddress=function(t){var e=t.address,n=t.district,a=t.region,i=t.location,r=t.code;if(this.detailControl.setValue(e),this.detailControl.validate(),i&&i.lat&&(this.$lat.val(i.lat),this.$lng.val(i.lng)),r&&this.$geoCity.val(r),this.areaControl){var o=this.areaControl.getAttr("level1"),s=this.areaControl.getAttr("level2"),l=o.filter(function(t){return n.indexOf(t.label)>=0}).map(function(t){return t.value});if(l.length){s=s[l[0]];for(var u in s)if(s.hasOwnProperty(u)){var c=s[u];if(a.indexOf(c.label)>=0){l.push(c.value);break}}this.areaControl.setValue(l)}}},t.prototype._addressHTML=function(t,e,n){void 0===n&&(n=!1);var a=n?'<span class="highlight">[当前]</span> ':"";return'<a href="javascript:;" class="address">\n\t\t\t\t<span class="description">'+a+t+'</span>\n\t\t\t\t<span class="district">'+e+"</span>\n\t\t\t</a>"},t}();e.Area=o},function(t,e,n){"use strict";e.__esModule=!0;var a=function(){function t(t){this.form=t;var e=t.getLayoutManager().FORM;t.on("afterInit",function(){if(!t.values.contact){var n=t.dataSource.contact||"";n&&(t.getControl("contact").setValue(n),t.getControl("contact").$element.closest(e.LINE).append('<div class="'+e.CLS_NOTE+'">为了保护您的帐号安全，请填写注册手机号。</div>'))}})}return t}();e.Contact=a},function(t,e,n){"use strict";function a(){var t=Cookie.read("_geo_fetch_time");return t?{latitude:Cookie.read("_geo_lat"),longitude:Cookie.read("_geo_lng"),fetchTime:t,fromCache:!0}:null}function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.latitude,n=t.longitude,a=+new Date;return Cookie.write("_geo_lat",e,l),Cookie.write("_geo_lng",n,l),Cookie.write("_geo_fetch_time",a,l),{latitude:e,longitude:n,fetchTime:a,fromCache:!1}}function r(t,e,n,a){"function"==typeof t&&t(e,n||p.STAT_SUCCESS,a)}function o(t,e){navigator&&navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(e){var n=e.coords;r(t,i(n))},function(n){e?r(t,e,p.STAT_EXPIRED,n):r(t,null,p.STAT_FAIL,n)})}function s(){for(var t=c.map(function(t){return t.w}).reduce(function(t,e){return t+e}),e=Math.random()*t,n=c,a=Array.isArray(n),i=0,n=a?n:n[Symbol.iterator]();;){var r;if(a){if(i>=n.length)break;r=n[i++]}else{if(i=n.next(),i.done)break;r=i.value}var o=r;if(o.w>e)return o.ak;e-=o.w}return""}e.__esModule=!0;var l=15,u=7200,c=[{ak:"1RAUBxCO9LD0auobX7ytVXzM",w:3},{ak:"1fsPGFzFGEMVn1sV3kgEVzGUy78tUQdA",w:1}],h={33:{en:"jiayuguan",zh:"嘉峪关"},34:{en:"jinchang",zh:"金昌"},35:{en:"baiyin",zh:"白银"},36:{en:"lanzhou",zh:"兰州"},37:{en:"jiuquan",zh:"酒泉"},38:{en:"daxinganling",zh:"大兴安岭"},39:{en:"heihe",zh:"黑河"},40:{en:"yichun",zh:"伊春"},41:{en:"qiqihaer",zh:"齐齐哈尔"},42:{en:"jiamusi",zh:"佳木斯"},43:{en:"hegang",zh:"鹤岗"},44:{en:"suihua",zh:"绥化"},45:{en:"shuangyashan",zh:"双鸭山"},46:{en:"jixi",zh:"鸡西"},47:{en:"qitaihe",zh:"七台河"},48:{en:"haerbin",zh:"哈尔滨"},49:{en:"mudanjiang",zh:"牡丹江"},50:{en:"daqing",zh:"大庆"},51:{en:"baicheng",zh:"白城"},52:{en:"songyuan",zh:"松原"},53:{en:"changchun",zh:"长春"},54:{en:"yanbian",zh:"延边"},55:{en:"jilin",zh:"吉林"},56:{en:"siping",zh:"四平"},57:{en:"baishan",zh:"白山"},58:{en:"shenyang",zh:"沈阳"},59:{en:"fuxin",zh:"阜新"},60:{en:"tieling",zh:"铁岭"},61:{en:"hulunbeier",zh:"呼伦贝尔"},62:{en:"xingan",zh:"兴安"},63:{en:"xilinguole",zh:"锡林郭勒"},64:{en:"tongliao",zh:"通辽"},65:{en:"haixi",zh:"海西"},66:{en:"xining",zh:"西宁"},67:{en:"haibei",zh:"海北"},68:{en:"hainan",zh:"海南"},69:{en:"haidong",zh:"海东"},70:{en:"huangnan",zh:"黄南"},71:{en:"yushu",zh:"玉树"},72:{en:"guoluo",zh:"果洛"},73:{en:"ganzi",zh:"甘孜"},74:{en:"deyang",zh:"德阳"},75:{en:"chengdu",zh:"成都"},76:{en:"yaan",zh:"雅安"},77:{en:"meishan",zh:"眉山"},78:{en:"zigong",zh:"自贡"},79:{en:"leshan",zh:"乐山"},80:{en:"liangshan",zh:"凉山"},81:{en:"panzhihua",zh:"攀枝花"},82:{en:"hetian",zh:"和田"},83:{en:"kashi",zh:"喀什"},84:{en:"kezilesu",zh:"克孜勒苏"},85:{en:"akesu",zh:"阿克苏"},86:{en:"bayinguoleng",zh:"巴音郭楞"},88:{en:"boertala",zh:"博尔塔拉"},89:{en:"tulufan",zh:"吐鲁番"},90:{en:"yili",zh:"伊犁"},91:{en:"hami",zh:"哈密"},92:{en:"wulumuqi",zh:"乌鲁木齐"},93:{en:"changji",zh:"昌吉"},94:{en:"tacheng",zh:"塔城"},95:{en:"kelamayi",zh:"克拉玛依"},96:{en:"aletai",zh:"阿勒泰"},97:{en:"shannan",zh:"山南"},98:{en:"linzhi",zh:"林芝"},99:{en:"changdu",zh:"昌都"},100:{en:"lasa",zh:"拉萨"},101:{en:"naqu",zh:"那曲"},102:{en:"rikaze",zh:"日喀则"},103:{en:"ali",zh:"阿里"},104:{en:"kunming",zh:"昆明"},105:{en:"chuxiong",zh:"楚雄"},106:{en:"yuxi",zh:"玉溪"},107:{en:"honghe",zh:"红河"},108:{en:"puer",zh:"普洱"},109:{en:"xishuangbanna",zh:"西双版纳"},110:{en:"lincang",zh:"临沧"},111:{en:"dali",zh:"大理"},112:{en:"baoshan",zh:"保山"},113:{en:"nujiang",zh:"怒江"},114:{en:"lijiang",zh:"丽江"},115:{en:"diqing",zh:"迪庆"},116:{en:"dehong",zh:"德宏"},117:{en:"zhangye",zh:"张掖"},118:{en:"wuwei",zh:"武威"},119:{en:"dongguan",zh:"东莞"},121:{en:"sanya",zh:"三亚"},122:{en:"ezhou",zh:"鄂州"},123:{en:"wuhai",zh:"乌海"},124:{en:"laiwu",zh:"莱芜"},125:{en:"haikou",zh:"海口"},126:{en:"bengbu",zh:"蚌埠"},127:{en:"hefei",zh:"合肥"},128:{en:"fuyang",zh:"阜阳"},129:{en:"wuhu",zh:"芜湖"},130:{en:"anqing",zh:"安庆"},131:{en:"beijing",zh:"北京"},132:{en:"chongqing",zh:"重庆"},133:{en:"nanping",zh:"南平"},134:{en:"quanzhou",zh:"泉州"},135:{en:"qingyang",zh:"庆阳"},136:{en:"dingxi",zh:"定西"},137:{en:"shaoguan",zh:"韶关"},138:{en:"foshan",zh:"佛山"},139:{en:"maoming",zh:"茂名"},140:{en:"zhuhai",zh:"珠海"},141:{en:"meizhou",zh:"梅州"},142:{en:"guilin",zh:"桂林"},143:{en:"hechi",zh:"河池"},144:{en:"chongzuo",zh:"崇左"},145:{en:"qinzhou",zh:"钦州"},146:{en:"guiyang",zh:"贵阳"},147:{en:"liupanshui",zh:"六盘水"},148:{en:"qinhuangdao",zh:"秦皇岛"},149:{en:"cangzhou",zh:"沧州"},150:{en:"shijiazhuang",zh:"石家庄"},151:{en:"handan",zh:"邯郸"},152:{en:"xinxiang",zh:"新乡"},153:{en:"luoyang",zh:"洛阳"},154:{en:"shangqiu",zh:"商丘"},155:{en:"xuchang",zh:"许昌"},156:{en:"xiangfan",zh:"襄阳"},157:{en:"jingzhou",zh:"荆州"},158:{en:"changsha",zh:"长沙"},159:{en:"hengyang",zh:"衡阳"},160:{en:"zhenjiang",zh:"镇江"},161:{en:"nantong",zh:"南通"},162:{en:"huaian",zh:"淮安"},163:{en:"nanchang",zh:"南昌"},164:{en:"xinyu",zh:"新余"},165:{en:"tonghua",zh:"通化"},166:{en:"jinzhou",zh:"锦州"},167:{en:"dalian",zh:"大连"},168:{en:"wulanchabu",zh:"乌兰察布"},169:{en:"bayannaoer",zh:"巴彦淖尔"},170:{en:"weinan",zh:"渭南"},171:{en:"baoji",zh:"宝鸡"},172:{en:"zaozhuang",zh:"枣庄"},173:{en:"rizhao",zh:"日照"},174:{en:"dongying",zh:"东营"},175:{en:"weihai",zh:"威海"},176:{en:"taiyuan",zh:"太原"},177:{en:"wenshan",zh:"文山"},178:{en:"wenzhou",zh:"温州"},179:{en:"hangzhou",zh:"杭州"},180:{en:"ningbo",zh:"宁波"},181:{en:"zhongwei",zh:"中卫"},182:{en:"linxia",zh:"临夏"},183:{en:"liaoyuan",zh:"辽源"},184:{en:"fushun",zh:"抚顺"},185:{en:"aba",zh:"阿坝"},186:{en:"yibin",zh:"宜宾"},187:{en:"zhongshan",zh:"中山"},188:{en:"bozhou",zh:"亳州"},189:{en:"chuzhou",zh:"滁州"},190:{en:"xuancheng",zh:"宣城"},191:{en:"langfang",zh:"廊坊"},192:{en:"ningde",zh:"宁德"},193:{en:"longyan",zh:"龙岩"},194:{en:"xiamen",zh:"厦门"},195:{en:"putian",zh:"莆田"},196:{en:"tianshui",zh:"天水"},197:{en:"qingyuan",zh:"清远"},198:{en:"zhanjiang",zh:"湛江"},199:{en:"yangjiang",zh:"阳江"},200:{en:"heyuan",zh:"河源"},201:{en:"chaozhou",zh:"潮州"},202:{en:"laibin",zh:"来宾"},203:{en:"bose",zh:"百色"},204:{en:"fangchenggang",zh:"防城港"},205:{en:"tongren",zh:"铜仁"},206:{en:"bijie",zh:"毕节"},207:{en:"chengde",zh:"承德"},208:{en:"hengshui",zh:"衡水"},209:{en:"puyang",zh:"濮阳"},210:{en:"kaifeng",zh:"开封"},211:{en:"jiaozuo",zh:"焦作"},212:{en:"sanmenxia",zh:"三门峡"},213:{en:"pingdingshan",zh:"平顶山"},214:{en:"xinyang",zh:"信阳"},215:{en:"hebi",zh:"鹤壁"},216:{en:"shiyan",zh:"十堰"},217:{en:"jingmen",zh:"荆门"},218:{en:"wuhan",zh:"武汉"},219:{en:"changde",zh:"常德"},220:{en:"yueyang",zh:"岳阳"},221:{en:"loudi",zh:"娄底"},222:{en:"zhuzhou",zh:"株洲"},223:{en:"yancheng",zh:"盐城"},224:{en:"suzhou",zh:"苏州"},225:{en:"jingdezhen",zh:"景德镇"},226:{en:"fz",zh:"抚州"},227:{en:"benxi",zh:"本溪"},228:{en:"panjin",zh:"盘锦"},229:{en:"baotou",zh:"包头"},230:{en:"alashan",zh:"阿拉善"},231:{en:"yulin",zh:"榆林"},232:{en:"tongchuan",zh:"铜川"},233:{en:"xian",zh:"西安"},234:{en:"linyi",zh:"临沂"},235:{en:"binzhou",zh:"滨州"},236:{en:"qingdao",zh:"青岛"},237:{en:"shuozhou",zh:"朔州"},238:{en:"jinzhong",zh:"晋中"},239:{en:"bazhong",zh:"巴中"},240:{en:"mianyang",zh:"绵阳"},241:{en:"guangan",zh:"广安"},242:{en:"ziyang",zh:"资阳"},243:{en:"quzhou",zh:"衢州"},244:{en:"taizhou",zh:"台州"},245:{en:"zhoushan",zh:"舟山"},246:{en:"guyuan",zh:"固原"},247:{en:"gannan",zh:"甘南"},248:{en:"neijiang",zh:"内江"},249:{en:"qujing",zh:"曲靖"},250:{en:"huainan",zh:"淮南"},251:{en:"chaohu",zh:"巢湖"},252:{en:"huangshan",zh:"黄山"},253:{en:"huaibei",zh:"淮北"},254:{en:"sanming",zh:"三明"},255:{en:"zhangzhou",zh:"漳州"},256:{en:"longnan",zh:"陇南"},257:{en:"guangzhou",zh:"广州"},258:{en:"yunfu",zh:"云浮"},259:{en:"jieyang",zh:"揭阳"},260:{en:"hezhou",zh:"贺州"},261:{en:"nanning",zh:"南宁"},262:{en:"zunyi",zh:"遵义"},263:{en:"anshun",zh:"安顺"},264:{en:"zhangjiakou",zh:"张家口"},265:{en:"tangshan",zh:"唐山"},266:{en:"xingtai",zh:"邢台"},267:{en:"anyang",zh:"安阳"},268:{en:"zhengzhou",zh:"郑州"},269:{en:"zhumadian",zh:"驻马店"},270:{en:"yichang",zh:"宜昌"},271:{en:"huanggang",zh:"黄冈"},272:{en:"yiyang",zh:"益阳"},273:{en:"shaoyang",zh:"邵阳"},274:{en:"xiangxi",zh:"湘西"},275:{en:"chenzhou",zh:"郴州"},276:{en:"tz",zh:"泰州"},277:{en:"suqian",zh:"宿迁"},278:{en:"yc",zh:"宜春"},279:{en:"yingtan",zh:"鹰潭"},280:{en:"chaoyang",zh:"朝阳"},281:{en:"yingkou",zh:"营口"},282:{en:"dandong",zh:"丹东"},283:{en:"eerduosi",zh:"鄂尔多斯"},284:{en:"yanan",zh:"延安"},285:{en:"shangluo",zh:"商洛"},286:{en:"jining",zh:"济宁"},287:{en:"weifang",zh:"潍坊"},288:{en:"jinan",zh:"济南"},289:{en:"shanghai",zh:"上海"},290:{en:"jincheng",zh:"晋城"},291:{en:"nanchong",zh:"南充"},292:{en:"lishui",zh:"丽水"},293:{en:"shaoxing",zh:"绍兴"},294:{en:"huzhou",zh:"湖州"},295:{en:"beihai",zh:"北海"},297:{en:"chifeng",zh:"赤峰"},298:{en:"luan",zh:"六安"},299:{en:"chizhou",zh:"池州"},300:{en:"fuzhou",zh:"福州"},301:{en:"huizhou",zh:"惠州"},302:{en:"jiangmen",zh:"江门"},303:{en:"shantou",zh:"汕头"},304:{en:"wuzhou",zh:"梧州"},305:{en:"liuzhou",zh:"柳州"},306:{en:"qiannan",zh:"黔南"},307:{en:"baoding",zh:"保定"},308:{en:"zhoukou",zh:"周口"},309:{en:"nanyang",zh:"南阳"},310:{en:"xiaogan",zh:"孝感"},311:{en:"huangshi",zh:"黄石"},312:{en:"zhangjiajie",zh:"张家界"},313:{en:"xiangtan",zh:"湘潭"},314:{en:"yongzhou",zh:"永州"},315:{en:"nanjing",zh:"南京"},316:{en:"xuzhou",zh:"徐州"},317:{en:"wuxi",zh:"无锡"},318:{en:"jian",zh:"吉安"},319:{en:"huludao",zh:"葫芦岛"},320:{en:"anshan",zh:"鞍山"},321:{en:"huhehaote",zh:"呼和浩特"},322:{en:"wuzhong",zh:"吴忠"},323:{en:"xianyang",zh:"咸阳"},324:{en:"ankang",zh:"安康"},325:{en:"taian",zh:"泰安"},326:{en:"yantai",zh:"烟台"},327:{en:"lvliang",zh:"吕梁"},328:{en:"yuncheng",zh:"运城"},329:{en:"guangyuan",zh:"广元"},330:{en:"suining",zh:"遂宁"},331:{en:"luzhou",zh:"泸州"},332:{en:"tianjin",zh:"天津"},333:{en:"jinhua",zh:"金华"},334:{en:"jiaxing",zh:"嘉兴"},335:{en:"shizuishan",zh:"石嘴山"},336:{en:"zhaotong",zh:"昭通"},337:{en:"tongling",zh:"铜陵"},338:{en:"zhaoqing",zh:"肇庆"},339:{en:"shanwei",zh:"汕尾"},340:{en:"shenzhen",zh:"深圳"},341:{en:"guigang",zh:"贵港"},342:{en:"qiandongnan",zh:"黔东南"},343:{en:"qianxinan",zh:"黔西南"},344:{en:"luohe",zh:"漯河"},346:{en:"yangzhou",zh:"扬州"},347:{en:"lianyungang",zh:"连云港"},348:{en:"changzhou",zh:"常州"},349:{en:"jiujiang",zh:"九江"},350:{en:"pingxiang",zh:"萍乡"},351:{en:"liaoyang",zh:"辽阳"},352:{en:"hanzhong",zh:"汉中"},353:{en:"heze",zh:"菏泽"},354:{en:"zibo",zh:"淄博"},355:{en:"datong",zh:"大同"},356:{en:"changzhi",zh:"长治"},357:{en:"yangquan",zh:"阳泉"},358:{en:"maanshan",zh:"马鞍山"},359:{en:"pingliang",zh:"平凉"},360:{en:"yinchuan",zh:"银川"},361:{en:"yl",zh:"玉林"},362:{en:"xianning",zh:"咸宁"},363:{en:"huaihua",zh:"怀化"},364:{en:"shangrao",zh:"上饶"},365:{en:"ganzhou",zh:"赣州"},366:{en:"liaocheng",zh:"聊城"},367:{en:"xinzhou",zh:"忻州"},368:{en:"linfen",zh:"临汾"},369:{en:"dazhou",zh:"达州"},370:{en:"sz",zh:"宿州"},371:{en:"suizhou",zh:"随州"},372:{en:"dezhou",zh:"德州"},373:{en:"enshi",zh:"恩施"},731:{en:"alaer",zh:"阿拉尔"},770:{en:"shihezi",zh:"石河子"},789:{en:"wujiaqu",zh:"五家渠"},792:{en:"tumushuke",zh:"图木舒克"},1214:{en:"dingan",zh:"定安"},1215:{en:"danzhou",zh:"儋州"},1216:{en:"wanning",zh:"万宁"},1217:{en:"baoting",zh:"保亭"},1293:{en:"qianjiang",zh:"潜江"},1641:{en:"tunchang",zh:"屯昌"},1642:{en:"changjiang",zh:"昌江"},1643:{en:"lingshui",zh:"陵水"},1644:{en:"wuzhishan",zh:"五指山"},1713:{en:"xiantao",zh:"仙桃"},2031:{en:"qiongzhong",zh:"琼中"},2032:{en:"ledong",zh:"乐东"},2033:{en:"lingao",zh:"临高"},2358:{en:"qionghai",zh:"琼海"},2359:{en:"baisha",zh:"白沙"},2634:{en:"dongfang",zh:"东方"},2654:{en:"tianmen",zh:"天门"},2734:{en:"shennongjia",zh:"神农架"},2757:{en:"chengmai",zh:"澄迈"},2758:{en:"wenchang",zh:"文昌"}},p={STAT_SUCCESS:0,STAT_FAIL:1,STAT_EXPIRED:2,get:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u,n=a();!n||new Date-n.fetchTime>1e3*e?o(t,n):r(t,n)},getCity:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u,n=JSON.parse(Cookie.read("_geo_city"));return n?void t(n):void this.get(function(n,a,i){return n?void $.ajax({type:"get",url:"//api.map.baidu.com/geocoder/v2/",data:{ak:s(),location:n.latitude+","+n.longitude,output:"json",pois:"0"},dataType:"jsonp",jsonp:"callback",jsonpCallback:"geocoderJsonp",success:function(n){var a=n.status,i=n.result;if(0!=a)return void t(null);var r=h[i.cityCode]||{};Cookie.write("__geo_city",JSON.stringify(r),e/86400),t(r)}}):void t(null)},e)}};e["default"]=p},function(t,e,n){"use strict";function a(t,e){var n=t.form.getLayoutManager().FORM,a=t.$element.closest(n.LINE).find(".js-ps-group");t.isMenuVisible=e,t.isMenuVisible?a.show():a.hide()}function i(t,e){return $.getJSON(e.urlRequestData,{cityId:e.form.getData("imports.city"),categoryId:e.form.getData("imports.category"),goal:t,params:r(e.levelSet,e)})}function r(t,e){var n=[],a=e.meta.treeLevel;return $.map(a,function(e){t[e]&&n.push([e,t[e]].join(","))}),n.join(";")}var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function a(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}();e.__esModule=!0;var s=n(1),l=n(0);e.switchClass="js-ps-control";var u=function(t){function n(e,n){var a=t.call(this,e,n)||this;return a.meta=e,a.form=n,a.urlRequestData=a.meta.urlRequestData||"/autocomplete/ajax",a.defaultPlaceholder=a.meta.defaultPlaceholder||"请选择"+a.meta.name,a.idOfUncategoryBrand=a.meta.idOfUncategoryBrand||"",a.levelSet={},a.isMenuVisible=!1,a.isRequested=!1,e.optgroups=e.optgroups||{},n.on("afterInit",function(){var t=e.treeLevel;n.values[t[0]]&&n.values[t[0]]!==a.idOfUncategoryBrand?($.map(t,function(t,e){a.levelSet[t]=0===e?a.$rootElement.find("[data-ps-value="+n.values[t]+"]").data("ps-label"):n.values[t]}),a.setPanelValue(a.levelSet)):$.map(t,function(t){return a.$rootElement.find('[name="'+t+'"]').val(n.values[t]||"")}),a._addScrollEffect(300),a._addMenuToggler(),a._watchOptionToLoadNextLevel()}),a}return o(n,t),n.prototype.render=function(){var t=this;if(this.$element)return this.$element;var n=$(this._generatePanelWrap());return this.onMount(function(a){t.$rootElement=n.closest(".p-line").addClass("panel-select"),t.$rootElement.find("."+e.switchClass).eq(0).addClass("active")}),this.$element=n},n.prototype.setPanelValue=function(t){var e=this,n=this.meta,a="",i=n.treeLevel;$.map(i,function(n,i){var r=t[n]||"",o="";o=0===i?e.$rootElement.find('[data-ps-label="'+r+'"]').data("ps-value")||e.idOfUncategoryBrand:r,e.$rootElement.find('input[name="'+n+'"]').val(o),a+=0===r.indexOf(a)?r.replace(a,""):" "+r}),this.emit("change",this),a=a||this.defaultPlaceholder,this.$rootElement.find(".js-ps-value").attr("title",a).text(a)},n.prototype.getPanelValue=function(){return r(this.levelSet,this)},n.prototype.setViewOfLevelList=function(t,e){var n=this.$rootElement.find('.js-ps-level-list[data-ps-level-name="'+t+'"]');e?n.show():n.hide(),n.html(e)},n.prototype.toggleMenu=function(t){a(this,t)},n.prototype._addScrollEffect=function(t){for(var e=this,n=!1,a=this.$rootElement.find(".js-ps-list-wrap"),i=this.$rootElement.find("li[data-gotoAnchor]"),r=a.offset().top,o=[],s=0;s<i.length;s++)o.push(i.eq(s).offset().top-r);this.$rootElement.find(".js-ps-group").addClass("loaded"),$("body").on("click","[data-goto]",function(i){var r=i.target,s=!e.$rootElement.find(r)[0];if(!n&&!s){window.tracker&&tracker.evt("fabu_panel_click",{platform:"web"}),n=!0;var l=$(r).index();a.animate({scrollTop:o[l]},t,function(){n=!1})}})},n.prototype._watchOptionToLoadNextLevel=function(){var t=this,e=function(e){t.setPanelValue(e),t.toggleMenu(!1),t.showError(null)};$("body").on("click",".js-ps-option",function(n){var a=n.target,r=!t.$rootElement.find(a)[0];if(!r){var o=$(a),s=t.meta.treeLevel,l=o.data("ps-level"),u=o.data("ps-label"),c=s.indexOf(l)+1,h=s[c];o.addClass("active").siblings().removeClass("active");for(var p=c;p<s.length;p++)t.levelSet[s[p]]=void 0,t.setViewOfLevelList(s[p],"");if(t.levelSet[l]=u,h){if(t.isRequested)return;t.isRequested=!0,i(h,t).then(function(n){if(t.isRequested=!1,"object"!=typeof n||!n[0])return void e(t.levelSet);var a=t._generateLevelListContent(n,{levelName:h,levelPlaceholder:"请选择"+h,optionGroupPattern:/[0-9]{4}['款']/g,needPrefixList:!1});t.setViewOfLevelList(h,a)})}else e(t.levelSet)}})},n.prototype._addMenuToggler=function(){var t=this,e=$("body"),n=function(e,n){n||t.toggleMenu(e)};e.on("click",function(e){return n(!1,!!t.$rootElement.find(e.target)[0])}),e.on("click",".js-ps-close",function(e){return n(!1,!t.$rootElement.find(e.target)[0])}),e.on("click",".js-ps-selection",function(e){return n(!t.isMenuVisible,!t.$rootElement.find(e.target)[0])})},n.prototype._generatePanelWrap=function(){var t=this.meta,n="",a="",i=this._generateLevelListContent(t.optgroups,{levelName:t.treeLevel[0],levelPlaceholder:this.defaultPlaceholder,optionGroupPattern:""+t.needOptionGroup!="0",needPrefixList:""+t.needPrefixList!="0"});return $.map(t.treeLevel,function(t,e){r=['<input type="hidden" name="','" />'],r.raw=['<input type="hidden" name="','" />'],n+=l.h(r,t),a+=[(o=['<div class="level-list js-ps-level-list" data-ps-level-name="','">'],o.raw=['<div class="level-list js-ps-level-list" data-ps-level-name="','">'],l.h(o,t)),0===e?i:"","</div>"].join("");var r,o}),[n,'<div class="level-control ',e.switchClass,'">','<div class="level-selection js-ps-selection">','<div class="level-placeholder js-ps-value">',this.defaultPlaceholder,"</div>",'<i class="icon icon-arrow-down level-arrow"></i>',"</div>",'<div class="level-group js-ps-group">',a,'<i class="level-close js-ps-close">×</i>',"</div>","</div>"].join("");
},n.prototype._generateLevelListContent=function(t,e){var n="",a="";return e&&e.needPrefixList&&(n=this._generatePrefixList(t)),a=this._generateOptionList(t,e),[(i=['<div class="level-title">',"</div>"],i.raw=['<div class="level-title">',"</div>"],l.h(i,e.levelPlaceholder)),n,'<div class="level-option-list-wrap js-ps-list-wrap',e.needPrefixList?" level-has-prefix-list":"",'">',a,"</div>"].join("");var i},n.prototype._generatePrefixList=function(t){var e="";return $.each(t,function(t){if(!(t.indexOf("anonymous")>=0)){n=['\n\t\t\t<li data-goto="group-','">\n\t\t\t\t',"\n\t\t\t</li>"],n.raw=['\n\t\t\t<li data-goto="group-','">\n\t\t\t\t',"\n\t\t\t</li>"],e+=l.h(n,t,t);var n}}),['<ul class="level-prefix-list">',e,"</ul>"].join("")},n.prototype._generateOptionList=function(t,e){var n="",a={},i="";if($.isArray(t))$.map(t,function(t){i=(t.match(e.optionGroupPattern)||[])[0],e.optionGroupPattern&&i&&!a[i]&&(r=['\n\t\t\t\t\t\t<li class="level-option-title">\n\t\t\t\t\t\t\t',"\n\t\t\t\t\t\t</li>"],r.raw=['\n\t\t\t\t\t\t<li class="level-option-title">\n\t\t\t\t\t\t\t',"\n\t\t\t\t\t\t</li>"],n+=l.h(r,i),a[i]=!0),o=['\n\t\t\t\t\t<li class="level-option js-ps-option" data-ps-level="','" data-ps-value="','" data-ps-label="','">\n\t\t\t\t\t\t',"\n\t\t\t\t\t</li>"],o.raw=['\n\t\t\t\t\t<li class="level-option js-ps-option" data-ps-level="','" data-ps-value="','" data-ps-label="','">\n\t\t\t\t\t\t',"\n\t\t\t\t\t</li>"],n+=l.h(o,e.levelName,t,t,t);var r,o});else{if(!$.isPlainObject(t))throw new Error("Imported meta is NOT processed!");$.each(t,function(t,a){if(!(t.indexOf("anonymous")>=0)){e.optionGroupPattern&&(i=['\n\t\t\t\t\t\t<li class="level-option-title" ',">\n\t\t\t\t\t\t\t","\n\t\t\t\t\t\t</li>"],i.raw=['\n\t\t\t\t\t\t<li class="level-option-title" ',">\n\t\t\t\t\t\t\t","\n\t\t\t\t\t\t</li>"],n+=l.h(i,e.needPrefixList?"data-gotoAnchor=group-"+t:"",t)),$.map(a,function(t){a=['\n\t\t\t\t\t\t<li class="level-option js-ps-option" data-ps-level="','" data-ps-value="','" data-ps-label="','">\n\t\t\t\t\t\t\t',"\n\t\t\t\t\t\t</li>"],a.raw=['\n\t\t\t\t\t\t<li class="level-option js-ps-option" data-ps-level="','" data-ps-value="','" data-ps-label="','">\n\t\t\t\t\t\t\t',"\n\t\t\t\t\t\t</li>"],n+=l.h(a,e.levelName,t.value,t.label,t.label);var a});var i}})}return['<ul class="level-option-list">',n,"</ul>"].join("")},n}(s.BaseFormControl);e["default"]=u,e.toggleMenu=a,e.getLevelData=i,e.joinLevelSet=r},function(t,e,n){"use strict";function a(t){return t[Math.floor(Math.random()*t.length)]}function i(t){for(var e=t.length;e>0;){var n=Math.floor(Math.random()*e);e--,a=[t[n],t[e]],t[e]=a[0],t[n]=a[1]}return t;var a}function r(t,e){return t.indexOf(e)>=0}e.__esModule=!0;var o=function(){function t(t){var e=this;this.form=t,this.controls=[],this.source={},this.magic={},t.on("afterInit",function(){e.init()})}return t.prototype.init=function(){var t=this,e=this.form;e.metas.filter(function(t){return t.autogen}).forEach(function(n){var a=e.getControl(n.name);t.source[n.name]=n.autogen.match(/\{.+?\}(?:\(.+?\))?/g).map(function(t,e){var n=t.match(/\{(.+?):(.+)\}(?:\((.+?)\))?/),a=(n[0],n[1]),i=n[2],r=n[3];return{key:a,weight:e,options:i.split("|"),features:r?r.split(","):[]}});var i=n.autogen.match(/#\d+$/g);i&&i.length&&(t.magic[n.name]=parseInt(i[0].slice(1))),t.magic[n.name]||(t.magic[n.name]=t.source[n.name].length),t.createButton(a),t.controls.push(a)})},t.prototype.generate=function(t){var e=t.getName(),n=this.generatePool(e),a=n.fixed,o=n.normal;if(a){if(a.length<this.magic[e]&&(o=i(o).slice(0,this.magic[e]-a.length)),t.meta.maxlength){var l=t.meta.maxlength,u=function(t){return t.map(function(t){return t.value.length}).reduce(function(t,e){return t+e},0)},c=u(a);u(o);if(c==l)o=[];else if(c>l){o=[];do c=u(a=i(a).slice(1));while(c>l)}else{l-=c;for(var h=u(o);h>l;)h=u(o=i(o).slice(1))}}var p=i(a.concat(o)).sort(function(t,e){return r(e.features,s.prepose)&&(!r(t.features,s.prepose)||e.weight<t.weight)?1:r(t.features,s.postpose)&&(!r(e.features,s.postpose)||e.weight>t.weight)?1:-1}).map(function(t){return t.value}).join("");t.setValue(p)}},t.prototype.generatePool=function(t){var e=this.source[t].filter(function(t){return r(t.features,s.fixed)}),n=this.source[t].filter(function(t){return!r(t.features,s.fixed)});return{fixed:this.getValues(e,!0),normal:this.getValues(n)}},t.prototype.getValues=function(t,e){for(var n=this,i=[],o=function(t,o,u,c){var h="";if("*"!=t){var p=l.form.getControl(t);if(h=p.getValue(),p.meta.id&&(h=Array.isArray(h)?h.map(function(t){return n.convertNode2Text(t)}):l.convertNode2Text(h)),!h||Array.isArray(h)&&!h.length)return e?(l.alertError(p),{value:null}):"continue"}if(Array.isArray(h)){if(r(u,s.multiple))return i=i.concat(h.map(function(t){var e=a(o).replace("__",t);return{features:u,value:e,weight:c}})),"continue";h=a(h)}var d=a(o).replace("__",h);i.push({features:u,value:d,weight:c})},l=this,u=0,c=t;u<c.length;u++){var h=c[u],p=h.key,d=h.options,f=h.features,m=h.weight,v=o(p,d,f,m);if("object"==typeof v)return v.value}return i},t.prototype.createButton=function(t){var e=this,n=this.form.getLayoutManager().FORM,a=(t.getName(),t.getAttr("displayName")),i=$('<div class="autogen-anchor btn-grey">自动生成'+a+"</div>");i.on("click",function(){window.tracker&&tracker.evt("fabu_auto",{op:"title_clicked"}),e.generate(t)}),t.$element.closest(n.CTRL).after(i)},t.prototype.convertNode2Text=function(t){if(!t)return t;var e=$('[value="'+t+'"]');return e.is('[type="checkbox"],[type="radio"]')&&(e=$(e[0].nextSibling)),e.text()},t.prototype.alertError=function(t){var e=t.getAttr("displayName");t.showError({error:"autogen",message:"请填写"+e,force:!0});var n=t.$element.offset(),a=$(window).height();n&&$(window).scrollTop(n.top-a/3)},t}();e.AutoGen=o;var s={fixed:"定",prepose:"前",postpose:"后",multiple:"多"}},function(t,e,n){"use strict";e.__esModule=!0;var a=function(){function t(t){var e=this;this.form=t,this.fields=["title","content"],this.ttl=864e5,this.storage={},t.getData("imports.isEdit")||(this.category=t.getData("imports.category"),this.city=t.getData("imports.city"),t.on("afterInit",function(){e.load(),e.init()}),t.on("afterValidate",function(){e.clearStorage()}))}return t.prototype.init=function(){var t=this,e=this.form;this.fields.filter(function(t){return e.hasControl(t)}).map(function(n){var a=e.getControl(n);a.onChange(function(){t.storage[n]=a.getValue(),t.save()})})},t.prototype.load=function(){var t,e=this,n=this.form;try{t=localStorage.getItem("ad_post_draft")}catch(a){}"string"==typeof t&&(t=JSON.parse(t),this.city==t.city&&this.category==t.category&&+new Date-t.time<this.ttl&&Object.keys(t.data).forEach(function(a){if(n.hasControl(a)){var i=t.data[a];e.storage[a]=i,n.getControl(a).setValue(i)}}))},t.prototype.save=function(){var t=(this.form,{category:this.category,city:this.city,time:+new Date,data:this.storage});try{localStorage.setItem("ad_post_draft",JSON.stringify(t))}catch(e){}},t.prototype.clearStorage=function(){try{localStorage.removeItem("ad_post_draft")}catch(t){}},t}();e.AutoSave=a},function(t,e,n){"use strict";e.__esModule=!0;var a=function(){function t(){$("body").on("click",".fabuverify",function(t){t.preventDefault(),tracker.evt("auth_show",{type:"second_verify"}),$.auth2({type:"recheck",force:"force",callback:function(){$("#validateform").submit()}})});var t=$(".skiprulesubmit");if(t.length&&t.data("name")&&t.data("value")){var e=$("form"),n=t.data("name"),a=t.data("value");e.append('<input type="hidden" name="'+n+'" value="'+a+'">'),e.find("input[type=submit]").val("继续发布"),$("body").on("click",".skiprulesubmit",function(t){t.preventDefault(),tracker.evt("skiprulesubmit",{key:a}),e.submit()})}$("body").on("click",".faburefresh",function(t){if(!$.iFrameModal){var e=$(t.target).data("id");return void $(t.target).attr("href","/pays/refresh/?adId="+e+"&src=fabu_chongfu_refresh")}t.preventDefault();var n=$(t.target).data();n.url="/pays/refresh/?adId="+n.id+"&src=fabu_chongfu_refresh",tracker.evt("faburefresh",{adId:n.id}),n.callback=function(){},$.iFrameModal(n)})}return t}();e.Liuma=a},function(t,e,n){"use strict";e.__esModule=!0;var a=function(){function t(t){var e=this;this.form=t,this.submitHandler=function(){return e.onSubmit()},t.on("afterValidate",this.submitHandler),t.on("afterInit",function(){if(!t.isEdit){var e=Cookie.read("web_auto_submit");"1"==e&&(Cookie.write("web_auto_submit","0",-1),$("#bxForm").submit())}})}return t.prototype.onSubmit=function(){var t=this.form,e=this;t.emit("shouldStopSubmission",!0),$.post("/oz/mobile/",{contact:$.trim($("[name=contact]").val()),id:location.pathname.split("/")[2]},function(n){var a=$.trim($("[name=contact]").val());if(/^1[3-9]\d{9}$/.test(a)||(a=""),"ok"===n.result)return t.off("afterValidate",e.submitHandler),void t.$rootElement.submit();if(n.mobile.length>0&&n.daifa.length>0){var i=location.pathname.split("/")[2];window._showDaifaModal({mobile:a,category:i,title:$.trim($("[name=title]").val()),callback:function(){t.off("afterValidate",e.submitHandler),t.$rootElement.submit()}})}else{if(tracker.evt("fabu_login_show",{mobile:a,title:$("[name=title]").val()}),!$.auth2)return t.off("afterValidate",e.submitHandler),void t.$rootElement.submit();$.auth2({type:"fabu",mobile:a,force:"force",callback:function(){var n=$.trim($("[name=contact]").val());n.length>0&&(!/^1[3-9]\d{9}$/.test(n)||n==a)&&(tracker.evt("fabu_login_success"),t.off("afterValidate",e.submitHandler),t.$rootElement.submit())}})}})},t}();e.PostAuth=a},function(t,e,n){"use strict";e.__esModule=!0;var a=function(){function t(t){this.form=t;var e=t.getData("imports.cityName"),n=t.getData("imports.category"),a=t.getData("imports.userId"),i=+new Date/1e3;t.on("beforeValidate",function(){tracker.evt("fabu_form_submit_click",{city:e,category:n,user:a,time:i})})}return t}();e.PostTracker=a},function(t,e,n){"use strict";e.__esModule=!0;var a=n(3),i=function(){function t(t){this.form=t;for(var e="",n=0,i=t.metas;n<i.length;n++){var r=i[n];r.extraInputHint&&(e=r.name)}if(e){var o=t.getLayoutManager().FORM,s=o===a.P_FORM?"level-control":o.CLS_CTRL;t.on("afterInit",function(){var n=t.getControl(e);if("PanelSelect"!==n.meta.controlType){var a=n.$element,i=a.closest(o.CTRL),r=a.closest(i.children());a.closest(o.LINE).addClass("brand-select"),i.hasClass("select-wrapper")&&(i.removeClass("select-wrapper"),r=r.wrap('<div class="select-wrapper">').parent()),r.addClass("js-ps-selection").wrap('<div class="'+s+' js-ps-control active">')}})}}return t}();e.BrandWrapper=i},,,,,,,,function(t,e,n){"use strict";e.__esModule=!0;var a=n(0),i=n(33),r=n(39);e.CONFIG={ershouqiche:{controlName:"车品牌",extraRequired:["排量","变速箱"]}};var o="js-ps-switcher",s="用户自填",l=function(){function t(t){var n=this;if(this.form=t,this.targetControl=null,this.disabled=!1,this.rendered=!1,this.config=e.CONFIG[t.dataSource.category],!this.config){for(var a=0,o=t.metas;a<o.length;a++){var s=o[a];s.extraInputHint&&(this.config={controlName:s.name,extraRequired:[]})}if(!this.config)return}var l=t.getLayoutManager().FORM;t.on("afterControlInit",function(){n.targetControl=t.getControl(n.config.controlName);var e=n.targetControl.meta,a=e.extraInputHint||[];return!a[0]||a.length<7?void(n.disabled=!0):(n.extraInputName=a[0],n.targetControl.isExtraInputUsed=t.values[n.config.controlName]===e.idOfUncategoryBrand,void(n.targetControl.isExtraInputUsed&&(n.initValue=t.values[n.extraInputName])))}),t.on("afterInit",function(){if(!n.disabled){if(n.rendered=!0,$(".js-ps-control").after(n._generateExtraInput()),$(".js-ps-selection").after(n._generateHint()),n.targetControl.isExtraInputUsed){$("."+r.switchClass+".active").removeClass("active").siblings("."+r.switchClass).addClass("active"),$('[name="'+n.extraInputName+'"]').val(n.initValue);for(var e=0,a=n.config.extraRequired;e<a.length;e++){var o=a[e];i.addRequiredToValidators(t.getControl(o),l)}}n.watchInputChange(l),n.addModeSwitcher(l)}})}return t.prototype.watchInputChange=function(t){var e=this;$("body").on("change",'input[name="'+this.extraInputName+'"]',function(n){e.overridePanelValue("custom",t),e.showErrorMsg(!$(n.target).val())}),this.targetControl.on("beforeValidate",function(){return!e.rendered||void e.showErrorMsg(!$('input[name="'+e.config.controlName+'"]').val())})},t.prototype.addModeSwitcher=function(t){var e=this;$("body").on("click","."+r.switchClass+".active",function(n){var a=n.target.className.indexOf(o)<0;a||(e.targetControl.isExtraInputUsed=!e.targetControl.isExtraInputUsed,r.toggleMenu(e.targetControl,!1),$('input[name="'+e.extraInputName+'"]').val(""),e.overridePanelValue("reset",t),e.showErrorMsg(!1),$(n.target).parents("."+r.switchClass).removeClass("active").siblings("."+r.switchClass).addClass("active"))}),this.form.on("beforeValidate",function(t){e.targetControl.getValue()||e.showErrorMsg(!0)})},t.prototype.overridePanelValue=function(t,e){var n=this.targetControl,a=n.meta.treeLevel,i="";a||(a=[n.getName()]),$.map(a,function(e,a){if(a>0&&n.setViewOfLevelList(e,""),"custom"===t)i=0===a?n.meta.idOfUncategoryBrand:s;else{if("reset"!==t)throw new Error("Unidentify type: "+t);i=""}$('[name="'+e+'"]').val(i)});var r=n.$element.closest(e.LINE);n.levelSet={},r.find(".js-ps-value").attr("title",n.defaultPlaceholder).text(n.defaultPlaceholder),r.find(".js-ps-option").removeClass("active"),n.emit("change",n)},t.prototype.showErrorMsg=function(t){this.targetControl.showError(t?{error:"",message:this.targetControl.meta.error}:null)},t.prototype._generateHint=function(){var t=this.targetControl.meta.extraInputHint;return['<div class="level-custom-hint">',t[1],'<span class="level-custom-switcher ',o,'">',t[2],"</span>",t[3],"</div>"].join("")},t.prototype._generateExtraInput=function(){var t=this.targetControl.meta.extraInputHint;return['<div class="level-control js-ps-control">',(e=['<input class="input-7 input" type="text" name="','" maxlength="50" placeholder="最多填写50字" />'],e.raw=['<input class="input-7 input" type="text" name="','" maxlength="50" placeholder="最多填写50字" />'],a.h(e,t[0])),'<div class="level-custom-hint">',t[4],'<span class="level-custom-switcher ',o,'">',t[5],"</span>",t[6],"</div>","</div>"].join("");var e},t}();e.Brand=l},,,,,function(t,e,n){"use strict";var a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function a(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}();e.__esModule=!0;var i=n(0),r=n(1),o=".form-label",s="isChecked",l={"黑色":"#000","白色":"#FFF","红色":"#D50714","黄色":"#FCE633","蓝色":"#146BC8","绿色":"#139217","紫色":"#60219D","橙色":"#FDB143","棕色":"#8A572E","银灰色":"#AAACB2","深灰色":"#5B5B5B","香槟金":"#E49024"},u=function(t){function e(e,n){var a=t.call(this,e,n)||this;return a.meta=e,a.form=n,a._addLabelEventListener(),a}return a(e,t),e.prototype.render=function(){var t=this;if(this.$element)return this.$element;var e=$(this._generateOptions());return this.onMount(function(n){return t.$rootElement=e.closest(".p-line").addClass("color-radio")}),this.$element=e},e.prototype.getValue=function(){return this.$element.find(":checked").val()},e.prototype.setValue=function(t){t?this.$element.find('input[value="'+t+'"]').prop("checked",!0).parents(".form-label").addClass(s).siblings().removeClass(s):this.$element.removeClass(s).find("input[type=radio]").prop("checked",!1),this.emit("change",this),this.isValid()&&this.showError(null)},e.prototype._addLabelEventListener=function(){var t=this;$("body").on("click",o,function(e){var n=e.target,a=!t.$rootElement.find(n)[0];if(!a){var i=$(n).closest(o).find("input").val();i&&t.getValue()!==i?t.setValue(i):t.setValue(""),e.preventDefault(),e.stopPropagation()}})},e.prototype._generateOptions=function(){var t,e=this.meta.name,n=this.getAttr("values"),a=this.getAttr("displayValues");return($.isEmptyObject(a)||a.length!=n.length)&&(a=n),$.map(n,function(n,r){return t=n&&l[n]?(o=['<i class="preview-label" style="background-color:',';"></i>'],o.raw=['<i class="preview-label" style="background-color:',';"></i>'],i.h(o,l[n])):"",[(s=['<label class="form-label">'],s.raw=['<label class="form-label">'],i.h(s)),t,(u=["<span>","</span>"],u.raw=["<span>","</span>"],i.h(u,a[r])),(c=['<input type="radio" name="','[]" value="','" class="checkbox-radio hidden">'],c.raw=['<input type="radio" name="','[]" value="','" class="checkbox-radio hidden">'],i.h(c,e,n)),'<span class="color-radio-check icon-done"></span>',(h=["</label>"],h.raw=["</label>"],i.h(h))];var o,s,u,c,h}).join("")},e}(r.BaseFormControl);e["default"]=u},,,,,,,function(t,e,n){"use strict";e.__esModule=!0;var a=function(){function t(t){var e=this;this.form=t,t.on("afterTabChange",function(){return e.bindChuanzhuAutoComplete(t)}),t.on("afterControlInit",function(){return e.bindChuanzhuOnChangeRedirect(t)})}return t.prototype.bindChuanzhuAutoComplete=function(t){var e=t.getData("imports.city"),n=t.getData("imports.category");$.each(t.metas,function(a,i){var r=i.name;if(i.isChuanzhuInput&&i.relatedParams&&i.chuanzhuCodeName){var o=i.chuanzhuCodeName,s=t.getControl(r);_defer.push(["//s.baixing.net/js/module/jquery-ui-1.9.1.custom.50550ec4.js",function(){s.$element.on("focus",function(){for(var a=$(this),r=i.relatedParams.split(","),s="",l=0,u=r;l<u.length;l++){var c=u[l],h=t.getControl(c),p=h.meta.chuanzhuCodeName,d=h.getValue();d="string"==typeof d&&0==d.indexOf("m")?$("[value="+d+"]").text():d,s+=p+","+d+";"}var f={params:s,goal:o,cityId:e,categoryId:n};$.post("/autocomplete/ajax",f,function(t){var e=JSON.parse(t);a.autocomplete({source:e,minLength:0}),$(".ui-autocomplete").css({"max-height":"200px","overflow-y":"auto"});var n=jQuery.Event("keydown");n.keyCode=40,a.trigger(n)})})}])}})},t.prototype.bindChuanzhuOnChangeRedirect=function(t){$.each(t.metas,function(e,n){var a=n.name;if(n.chuanzhuRedirect){var i=t.getControl(a);i.on("change",function(){$('[name="'+n.chuanzhuRedirect+'"]').focus()})}})},t}();e.Chuanzhu=a},,,,,,function(t,e,n){"use strict";function a(t){var e=t.getName();if("C11"!=e&&"C12"!=e){for(var n=t.validators.length-1;n>=0;n--){if(t.validators[n]===u.required)return;if(t.validators[n]===u.optional){t.validators.splice(n,1);break}}t.validators.push(u.required),o(t.$element.closest(".p-line").find(".p-label")),o(t.$element.closest(".p-line").find(".p-sublabel"))}}function i(t){for(var e=t.validators.length-1;e>=0;e--)t.validators[e]!==u.required&&t.validators[e]!==u.optional||(t.validators.splice(e,1),s(t.$element.closest(".p-line").find(".p-label")),s(t.$element.closest(".p-line").find(".p-sublabel")))}function r(t){if(t.getValue()){for(var e=!1,n=t.validators.length-1;n>=0;n--)t.validators[n]===u.required&&(e=!0);return e}return!1}function o(t){t.find(".required").length||t.prepend('<span class="required">* </span>')}function s(t){t.find(".required").remove()}function l(t,e){void 0===e&&(e=!1),$.map(t,function(t){!e&&t.getValue()&&t.getValue()[0]||t.$element.closest(".p-line").hide()})}e.__esModule=!0;var u=n(2),c=n(0),h=n(0),p=function(){function t(t){var e=this;if(this.form=t,this.defaultValue={},this.gujiaParams={},this.requiredOptions={},this.termUrl={},this.prompt={},this.isEditing=!1,this.doNotClearMetas=!1,"shouji"===t.dataSource.category){for(var n=!1,a=0,i=t.metas;a<i.length;a++){var r=i[a];if("isNew"===r.name){n=!0;break}}n&&(t.on("beforeInit",function(){e.defaultValue={"手机系列":t.values["手机系列"],C1:t.values.C1,C2:t.values.C2,C3:t.values.C3,C4:t.values.C4,C5:t.values.C5,C6:t.values.C6,C7:t.values.C7,C8:t.values.C8,C9:t.values.C9,C10:t.values.C10,C11:t.values.C11,C12:t.values.C12,isNew:t.values.isNew,isRecycle:t.values.isRecycle,recycler:t.values.recycler},t.values["手机系列"]||(e.defaultValue={}),e.form.values.title&&(e.isEditing=!0,e.doNotClearMetas=!0)}),t.on("afterInit",function(){$.each(e.defaultValue,function(e,n){t.values[e]=n}),e._initFormControls(t),e._watchMetasChange(t),e.isEditing&&(e._isNewClick(),e._isRecycleClick())}))}}return t.prototype._isNewClick=function(){var t=this;$(".all-ershou-metas").show();var e=this.form.getControl("isNew").getValue();"使用过"==e&&($(".ershou-metas").show(),this.gujiaParams.isNew="0"),"全新未拆封"==e&&($(".ershou-metas").hide(),this.gujiaParams.isNew="1"),this.isEditing?setTimeout(function(){t._ajaxGetPrice()},1e3):this._ajaxGetPrice()},t.prototype._isRecycleClick=function(){var t=this.form.getControl("isRecycle").getValue(),e=this.form.getControl("recycler");"不需要"==t&&(i(e),$("#xieyi").hide(),e.$element.closest(".p-line").hide()),"需要"==t&&(a(e),$("#xieyi").show(),e.$element.closest(".p-line").show())},t.prototype._initFormControls=function(t){var e=this;$("div[id^='id_C']").wrapAll('<div class="all-ershou-metas"> </div>'),$("#id_C5,#id_C6,#id_C7,#id_C8,#id_C9,#id_C10,#id_C11,#id_C12").wrapAll('<div class="ershou-metas"> </div>'),$("div[id^='id_C']").children(".p-label").removeClass("p-label").addClass("p-sublabel"),$(".ershou-metas").hide(),$(".all-ershou-metas").hide(),t.getControl("isNew").onChange(function(t){e._isNewClick()}),$("#id_recycler").children(".p-label").removeClass("p-label").addClass("p-sublabel"),t.getControl("手机型号").onChange(function(n){var a=$("input[name='手机型号']").val(),i=$("input[name='手机系列']").val(),r=$("input[name='具体机型']").val();e.gujiaParams.brand_id=a,e.gujiaParams.model_name=i,e.gujiaParams.detail_name=r,e._ajaxGetMetas(a,i),t.getControl("isNew").$element.closest(".p-line").show()});var n=(l=['<div class="p-line" id="price-block" style="margin-left:360px;margin-right:170px;padding:15px 15px 15px 15px;background-color:#EEEFF1">\n\t\t\t<p>市场估价:以下价格又第三方提供。我们建议您可以在此报价上增加10%-30%定价。\n\t\t\t<p>回收价格以商家最终确认为准。\n\t\t\t\t<hr style="height:1px;border:none;border-top:1px dashed #131313;margin:15px 0px 15px 0px" />\n\t\t\t\t<table width="100%">\n\t\t\t\t\t<tr id="gujia">\n\t\t\t\t\t</tr>\n\t\t\t\t</table>\n\t\t\t</div>'],l.raw=['<div class="p-line" id="price-block" style="margin-left:360px;margin-right:170px;padding:15px 15px 15px 15px;background-color:#EEEFF1">\n\t\t\t<p>市场估价:以下价格又第三方提供。我们建议您可以在此报价上增加10%-30%定价。\n\t\t\t<p>回收价格以商家最终确认为准。\n\t\t\t\t<hr style="height:1px;border:none;border-top:1px dashed #131313;margin:15px 0px 15px 0px" />\n\t\t\t\t<table width="100%">\n\t\t\t\t\t<tr id="gujia">\n\t\t\t\t\t</tr>\n\t\t\t\t</table>\n\t\t\t</div>'],c.h(l));$("#id_价格").after(n);var a=(u=["<span>\n\t\t\t<img src='//file.baixing.net/201603/9d4f9ce8c2d079386492f2038c6adf98.png'/>\n\t\t\t若需要,百姓网认证的优质手机回收商会与您联系,快速拿现金\n\t\t\t</span>"],u.raw=["<span>\n\t\t\t<img src='//file.baixing.net/201603/9d4f9ce8c2d079386492f2038c6adf98.png'/>\n\t\t\t若需要,百姓网认证的优质手机回收商会与您联系,快速拿现金\n\t\t\t</span>"],c.h(u));t.getControl("isRecycle").$element.parent().after(a);var r=t.getControl("recycler");i(r),r.$element.closest(".p-line").hide(),t.getControl("isRecycle").onChange(function(t){e._isRecycleClick()}),t.getControl("isNew").$element.closest(".p-line").hide(),$("#formsubmittips").append("\n\t\t\t<span id='xieyi'>\n\t\t\t<a id = 'xieyi_dynamic' target=\"_blank\" href=\"#\">回收协议</a>\n\t\t\t\t</span> "),$("#xieyi").hide();var o=t.getControl("recycler"),s=(h=['<div id="prompt" class="p-line" style="display: none; text-align:center;">\n\t\t</div>'],h.raw=['<div id="prompt" class="p-line" style="display: none; text-align:center;">\n\t\t</div>'],c.h(h));$("#id_recycler").append(s),o.onChange(function(t){var n=e.termUrl[o.getValue()];n&&$("#xieyi_dynamic").attr("href",n);var a=e.prompt[o.getValue()];a?($("#prompt").html(a),$("#prompt").show()):$("#prompt").hide()}),$(".select-all").hide(),$("#price-block").hide(),i(t.getControl("isRecycle")),this.form.getControl("isRecycle").$element.closest(".p-line").hide();var l,u,h},t.prototype._watchMetasChange=function(t){var e=this,n=["C1","C2","C3","C4","C5","C6","C7","C8","C9","C10","C11","C12"];$.each(n,function(n,a){var i=t.getControl(a);i.onChange(function(t){var n=i.getValue();e.gujiaParams[a]=n,e._ajaxGetPrice()})})},t.prototype._ajaxGetMetas=function(t,e){var n=this,a="/rcyajax/ShoujiGujiaMeta",i={brand_id:t,model_id:e};$.ajax({url:a,type:"POST",data:$.param(i),success:function(t,e,a){if("string"==typeof t){var i=$.parseJSON(t);n._checkValidMetas(i)}},error:function(t,e,n){h.logError("ajax error get meta:"+a+t+e+n)}})},t.prototype._checkValidMetas=function(t){var e=this,n=["C1","C2","C3","C4","C5","C6","C7","C8","C9","C10","C11","C12"];this.requiredOptions={};for(var r=0,o=t;r<o.length;r++){var s=o[r];this.requiredOptions[s.name]=s.value}for(var l=0,u=n;l<u.length;l++){var c=u[l],h=this.form.getControl(c);h.$element.closest(".p-line").hide(),this.doNotClearMetas||h.setValue(""),i(h)}this.doNotClearMetas=!1,$.each(this.requiredOptions,function(t,n){var i=e.form.getControl(t);i.$element.closest(".p-line").show(),a(i),i.$element.find('input[value^="D"]').parents(".form-label").hide();for(var r=n.split(","),o=0,s=r;o<s.length;o++){var l=s[o];i.$element.find('input[value="'+l+'"]').parents(".form-label").show()}})},t.prototype._ajaxGetPrice=function(){var t=this,e="/rcyajax/ShoujiGujia",n=this.gujiaParams;n.city=this.form.dataSource.city;var a=JSON.stringify(n);$.ajax({url:e,type:"POST",dataType:"json",data:a,contentType:"application/json; charset=utf-8",success:function(e){t._updateGujiaDisplay(e)},error:function(t,e,n){h.logError("ajax error get price"+t+e+n),h.logError(a)}})},t.prototype._checkOptions=function(){JSON.stringify(this.gujiaParams);return!0},t.prototype._updateGujiaDisplay=function(t){this.gujiaData=t,this.termUrl={};var e="",n=0,r={},o=this.gujiaData.index,s=this.gujiaData.content;if(o)for(var l=0,u=o;l<u.length;l++){var c=u[l],h=s[c],p=h.name;r[p]=h.price,n+=h.price;var d=h.price.toString();if(this.termUrl[p]=h.termUrl,this.prompt[p]=h.tradeDes,"0"==d)d="暂无报价";else{d+="元",e+="<td>"+p+':<span class="pink">'+d+"</span></td>";var f="gujia["+h.name+"]";e+='<input type="hidden" name="'+f+'"value="'+h.price.toString()+'">'}}$("#gujia").html(e),0==n?($("#price-block").hide(),i(this.form.getControl("isRecycle")),this.form.getControl("isRecycle").$element.closest(".p-line").hide(),this.form.getControl("recycler").$element.closest(".p-line").hide(),this.form.getControl("isRecycle").setValue("")):($("#price-block").show(),a(this.form.getControl("isRecycle")),this.form.getControl("isRecycle").$element.closest(".p-line").show());var m=this.form.getControl("recycler");m.$element.find("input").parents(".form-label").hide(),$.each(r,function(t,e){parseInt(""+e,10)>0&&m.$element.find('input[value="'+t+'"]').parents(".form-label").show()})},t}();e.Shouji=p,e.addRequiredToValidators=a,e.removeRequiredFromValidators=i,e.isRequiredControlFilled=r,e.addStarToRow=o,e.removeStarFromRow=s,e.hideControls=l},,,,,,,,,,,,,function(t,e,n){"use strict";e.__esModule=!0;var a=n(0),i=n(0),r=n(71),o=n(71),s=function(){function t(t){var e=this;if(this.form=t,this.defaultValue={},this.gujiaParams={},this.requiredOptions={},this.termUrl={},this.prompt={},this.doNotClearMetas=!1,this.ajaxPending=!1,"dianqi"===t.dataSource.category){for(var n=!1,a=0,i=t.metas;a<i.length;a++){var r=i[a];if("isRecycle"===r.name){n=!0;break}}n&&(t.on("beforeInit",function(){if(t.isEdit){e.doNotClearMetas=!0,e.defaultValue={};var n=JSON.parse(t.values.dianqiAddition);$.each(n,function(t,n){"string"!=typeof n&&(n=n[0]),e.defaultValue[t]=n.toString()}),e.defaultValue["具体分类"]=t.values["具体分类"],e.ajaxPending=!0,setTimeout(function(){e.ajaxPending=!1,e._ajaxGetPrice()},600)}}),t.on("afterInit",function(){e._initForm(),e._watchMetasChange();var n=t.getControl("分类"),a=n.getValue();e._processDianqiTypes(a),t.getControl("具体分类").setValue(e.defaultValue["具体分类"]),delete e.defaultValue["具体分类"],e._isRecycleClick(),$.each(e.defaultValue,function(n,a){t.getControl(n).setValue(a),e.gujiaParams[n]=a})}))}}return t.prototype._initForm=function(){var t=this;this.allGujiaMetaNames=this.form.metas.map(function(t){return t.name}).filter(function(t){return"n"==t[0]&&"b"==t[1]});var e="div[id^='id_nb']";$(e).wrapAll('<div class="all-ershou-metas"> </div>'),$(e).children(".p-label").removeClass("p-label").addClass("p-sublabel"),$(".ershou-metas").hide(),$(".all-ershou-metas").hide();var n=(d=['<div class="p-line" id="price-block" style="margin-left:360px;margin-right:170px;padding:15px 15px 15px 15px;background-color:#EEEFF1">\n\t\t\t<p>市场估价:以下价格又第三方提供。我们建议您可以在此报价上增加10%-30%定价。\n\t\t\t<p>回收价格以商家最终确认为准。\n\t\t\t\t<hr style="height:1px;border:none;border-top:1px dashed #131313;margin:15px 0px 15px 0px" />\n\t\t\t\t<table width="100%">\n\t\t\t\t\t<tr id="gujia">\n\t\t\t\t\t</tr>\n\t\t\t\t</table>\n\t\t\t</div>'],d.raw=['<div class="p-line" id="price-block" style="margin-left:360px;margin-right:170px;padding:15px 15px 15px 15px;background-color:#EEEFF1">\n\t\t\t<p>市场估价:以下价格又第三方提供。我们建议您可以在此报价上增加10%-30%定价。\n\t\t\t<p>回收价格以商家最终确认为准。\n\t\t\t\t<hr style="height:1px;border:none;border-top:1px dashed #131313;margin:15px 0px 15px 0px" />\n\t\t\t\t<table width="100%">\n\t\t\t\t\t<tr id="gujia">\n\t\t\t\t\t</tr>\n\t\t\t\t</table>\n\t\t\t</div>'],a.h(d));this.form.getControl("价格").$element.parent().parent().after(n),$("#price-block").hide();var i=(f=['<div id="recycleHint" class="p-line" style="margin-left:356px">\n            <img src=\'//file.baixing.net/201603/9d4f9ce8c2d079386492f2038c6adf98.png\'/>\n            若需要,百姓网认证的专业回收商免费上门服务,当场拿现金\n            </div>'],f.raw=['<div id="recycleHint" class="p-line" style="margin-left:356px">\n            <img src=\'//file.baixing.net/201603/9d4f9ce8c2d079386492f2038c6adf98.png\'/>\n            若需要,百姓网认证的专业回收商免费上门服务,当场拿现金\n            </div>'],a.h(f));this.form.getControl("isRecycle").$element.parent().parent().after(i);var r=(m=['<div id = "huishoudizhi" class="p-line" style="margin-left:356px">\n            <img src=\'//file.baixing.net/201603/9d4f9ce8c2d079386492f2038c6adf98.png\'/>\n            为使回收商尽快与您联系,请填写包含小区名的详细地址\n            </div>'],m.raw=['<div id = "huishoudizhi" class="p-line" style="margin-left:356px">\n            <img src=\'//file.baixing.net/201603/9d4f9ce8c2d079386492f2038c6adf98.png\'/>\n            为使回收商尽快与您联系,请填写包含小区名的详细地址\n            </div>'],a.h(m));this.form.getControl("images").$element.parent().parent().after(r),$("#huishoudizhi").hide();var s=this.form.getControl("具体分类");s.$element.closest(".p-line").hide();var l=this.form,u=l.getControl("recycler");u.$element.closest(".p-line").hide(),l.getControl("isRecycle").onChange(function(e){t._isRecycleClick()});var c=(v=['<div id="prompt" class="p-line" style="display: none; text-align:center;">\n\t\t</div>'],v.raw=['<div id="prompt" class="p-line" style="display: none; text-align:center;">\n\t\t</div>'],a.h(v));$("#id_recycler").append(c),$("#formsubmittips").append((g=["\n\t\t\t<span id='xieyi'>\n\t\t\t<a id = 'xieyi_dynamic' target=\"_blank\" href=\"#\">回收协议</a>\n\t\t\t\t</span> "],g.raw=["\n\t\t\t<span id='xieyi'>\n\t\t\t<a id = 'xieyi_dynamic' target=\"_blank\" href=\"#\">回收协议</a>\n\t\t\t\t</span> "],a.h(g))),$("#xieyi").hide();var h=l.getControl("isRecycle");o.removeRequiredFromValidators(h),$("recycleHint").hide(),$("#id_isRecycle").hide();var p=l.getControl("recycler");p.onChange(function(e){var n=t.termUrl[p.getValue()];n&&$("#xieyi_dynamic").attr("href",n);var a=t.prompt[p.getValue()];a?($("#prompt").html(a),$("#prompt").show()):$("#prompt").hide()});var d,f,m,v,g},t.prototype._watchMetasChange=function(){var t=this,e=this.form,n=e.getControl("分类");n.onChange(function(e){var a=n.getValue();t._processDianqiTypes(a)});var a=e.getControl("具体分类");a.onChange(function(e){if(a.getValue()){t.gujiaParams={},t.gujiaParams.typeId=n.getValue();var i=a.getValue();t.gujiaParams.detailTypeId=i,i&&t._ajaxGetMetas()}else{$("#price-block").hide(),$(".all-ershou-metas").hide();for(var r=0,s=t.allGujiaMetaNames;r<s.length;r++){var l=s[r],u=t.form.getControl(l);u.$element.closest(".p-line").hide(),t.doNotClearMetas||u.setValue(""),o.removeRequiredFromValidators(u)}}});for(var i=function(n){e.getControl(n).onChange(function(e){var a=e.getValue();t.gujiaParams[n]=a,a&&t._ajaxGetPrice()})},r=0,s=this.allGujiaMetaNames;r<s.length;r++){var l=s[r];i(l)}},t.prototype._isRecycleClick=function(){
var t=this.form.getControl("isRecycle").getValue(),e=this.form.getControl("recycler");"不需要"==t&&(o.removeRequiredFromValidators(e),$("#xieyi").hide(),e.$element.closest(".p-line").hide(),$("#huishoudizhi").hide()),"需要"==t&&(r.addRequiredToValidators(e),e.setValue("九贝壳"),$("#xieyi").show(),$("#huishoudizhi").show(),e.$element.closest(".p-line").show())},t.prototype._processDianqiTypes=function(t){var e=this.form.getControl("具体分类");e.setValue(""),e.$element.find("input").parents(".form-label").hide(),e.$element.closest(".p-line").show(),$(".all-ershou-metas").hide();var n=this.form.getControl("isRecycle");switch(t){case"m177571":e.$element.find('input[value="nb11"],input[value="nb12"],input[value="nb13"],input[value="nb14"]').parents(".form-label").show(),r.addRequiredToValidators(n),$("#id_isRecycle").show(),$("#recycleHint").show();break;case"m177567":e.$element.find('input[value="nb19"],input[value="nb21"]').parents(".form-label").show(),r.addRequiredToValidators(n),$("#id_isRecycle").show(),$("#recycleHint").show();break;case"m177568":e.$element.find('input[value="nb433"],input[value="nb29892"],input[value="nb29893"],input[value="nb29894"],input[value="nb29895"],input[value="nb29896"]').parents(".form-label").show(),r.addRequiredToValidators(n),$("#id_isRecycle").show(),$("#recycleHint").show();break;case"m177569":e.$element.find('input[value="nb15"],input[value="nb16"]').parents(".form-label").show(),r.addRequiredToValidators(n),$("#id_isRecycle").show(),$("#recycleHint").show();break;default:o.removeRequiredFromValidators(n),$("#id_isRecycle").hide(),$("#recycleHint").hide(),n.setValue("不需要"),e.$element.closest(".p-line").hide(),$(".all-ershou-metas").hide();for(var a=0,i=this.allGujiaMetaNames;a<i.length;a++){var s=i[a],l=this.form.getControl(s);l.$element.closest(".p-line").hide(),this.doNotClearMetas||l.setValue(""),o.removeRequiredFromValidators(l)}}},t.prototype._ajaxGetMetas=function(){var t=this,e="/rcyajax/DianqiGujiaMeta",n=this.form.getControl("分类").getValue(),a=this.form.getControl("具体分类").getValue();if(n&&a){var r={typeId:n,detailTypeId:a};$.ajax({url:e,type:"POST",data:$.param(r),success:function(e,n,a){if("string"==typeof e){var i=$.parseJSON(e);t._checkValidMetas(i),$(".all-ershou-metas").show()}},error:function(t,n,a){i.logError("ajax error get meta:"+e+t+n+a)}})}},t.prototype._checkValidMetas=function(t){var e=this,n=this.allGujiaMetaNames;this.requiredOptions={};for(var a=0,i=t;a<i.length;a++){var s=i[a];this.requiredOptions[s.name]=s.value}for(var l=0,u=n;l<u.length;l++){var c=u[l],h=this.form.getControl(c);h.$element.closest(".p-line").hide(),this.doNotClearMetas||h.setValue(""),o.removeRequiredFromValidators(h)}this.doNotClearMetas=!1,$.each(this.requiredOptions,function(t,n){var a=e.form.getControl(t);a.$element.closest(".p-line").show(),r.addRequiredToValidators(a),a.$element.find('input[value^="nb"]').parents(".form-label").hide();for(var i=n.split(","),o=0,s=i;o<s.length;o++){var l=s[o];a.$element.find('input[value="'+l+'"]').parents(".form-label").show()}})},t.prototype._ajaxGetPrice=function(){var t=this;if(!this.ajaxPending){var e=0;$.each(this.gujiaParams,function(t,n){"n"==t[0]&&n&&e++});var n=0;if($.each(this.requiredOptions,function(t,e){e&&n++}),!(e<n)){var a="/rcyajax/DianqiGujia",r=this.gujiaParams;r.city=this.form.dataSource.city;var o=JSON.stringify(r);$.ajax({url:a,type:"POST",dataType:"json",data:o,contentType:"application/json; charset=utf-8",success:function(e){t._updateGujiaDisplay(e)},error:function(t,e,n){i.logError("ajax error get price"+t+e+n),i.logError(o)}})}}},t.prototype._updateGujiaDisplay=function(t){this.gujiaData=t,this.termUrl={};var e="",n=0,a={},i=this.gujiaData.index,s=this.gujiaData.content;if(i)for(var l=0,u=i;l<u.length;l++){var c=u[l],h=s[c],p=h.name;a[p]=h.price,n+=h.price;var d=h.price.toString();if(this.termUrl[p]=h.termUrl,this.prompt[p]=h.tradeDes,"0"==d)d="暂无报价";else{d+="元",e+="<td>"+p+':<span class="pink">'+d+"</span></td>";var f="gujia["+h.name+"]";e+='<input type="hidden" name="'+f+'"value="'+h.price.toString()+'">',e+='<input type="hidden" name="eval_report_id"value="'+h.eval_report_id+'">'}}$("#gujia").html(e),0==n?($("#price-block").hide(),o.removeRequiredFromValidators(this.form.getControl("isRecycle")),this.form.getControl("isRecycle").$element.closest(".p-line").hide(),this.form.getControl("recycler").$element.closest(".p-line").hide(),this.form.getControl("isRecycle").setValue(""),$("#huishoudizhi").hide()):($("#price-block").show(),r.addRequiredToValidators(this.form.getControl("isRecycle")),this.form.getControl("isRecycle").$element.closest(".p-line").show(),$("#huishoudizhi").show());var m=this.form.getControl("recycler");m.$element.find("input").parents(".form-label").hide(),$.each(a,function(t,e){parseInt(""+e,10)>0&&m.$element.find('input[value="'+t+'"]').parents(".form-label").show()})},t}();e.Jiadian=s},,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";var a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function a(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}();e.__esModule=!0;var i=n(4),r=n(37),o=n(21),s=n(43),l=n(36),u=n(42),c=n(16),h=n(44),p=n(40),d=n(31),f=n(41),m=n(53),v=n(45),g=n(65),y=n(71),_=n(84),b=n(14),$=n(39),C=n(58),z=n(15),w={getControlByMeta:function(t,e){var n=t.controlType;switch(n){case"PanelSelect":return t.defaultValue=t.defaultValue?t.defaultValue.split(","):[],new $["default"](t,e);case"ColorRadio":return t=b.ControlFactory._splitValues(t),new C["default"](t,e);default:return b.ControlFactory.getControlByMeta(t,e)}}},x=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.getPlugins=function(){return[s.PostAuth,r.Contact,o.Relation,v.BrandWrapper,m.Brand,l.Area,u.Liuma,c.HardCode,g.Chuanzhu,y.Shouji,_.Jiadian,h.PostTracker,p.AutoGen,d.AutoFill,f.AutoSave]},e.prototype.getControlFactory=function(){return w},e.prototype.getLayoutManager=function(){return z.layoutManager},e}(i.NeoForm);e.NeoForm=x}]);
//# sourceMappingURL=neoform-ershou.99fbab11.js.map