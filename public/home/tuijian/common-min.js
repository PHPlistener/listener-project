function _loadAsyncJs(e){var f=e;var d=document.getElementsByTagName("script");for(var a=0;a<d.length;a++){if(d[a].src==f){return}}var b=document.createElement("script");b.type="text/javascript";b.async=true;b.src=f;var c=d[0];c.parentNode.insertBefore(b,c)}function _getJsFilePath(b){var a=document.location.hostname;var c=/^\w*?.suning.com$/;var f=/^\w*?pre.cnsuning.com$/;var e=/^\w*?sit.cnsuning.com$/;var d="";if(c.test(a)){d=("https:"==document.location.protocol)?"https://imgssl.suning.com":"http://script.suning.cn"}else{if(f.test(a)){d=("https:"==document.location.protocol)?"https://preimgssl.suning.com":"http://prescript.suning.cn"}else{if(e.test(a)){d=("https:"==document.location.protocol)?"https://sit1imgssl.suning.com":"http://sit1script.suning.cn"}else{d=("https:"==document.location.protocol)?"https://preimgssl.suning.com":"http://prescript.suning.cn"}}}d=d+"/javascript/sn_da/"+b;return d}function isArray(a){return Object.prototype.toString.call(a)==="[object Array]"}var windowOnLoadEventQueue=[];var scriptOnLoadEventQueue=[];window.onload=function(){for(var a in windowOnLoadEventQueue){windowOnLoadEventQueue[a]()}};function addOnLoad(a){windowOnLoadEventQueue=windowOnLoadEventQueue.concat(a)}var lazyScriptMap={};function lazyLoadScript(d,e){if(!lazyScriptMap[d]){lazyScriptMap[d]=e;var a=document.createElement("script");if("function"===typeof e){if(!/msie/i.test(navigator.userAgent.toLowerCase())){a.onload=e}a.onreadystatechange=function(){if("loaded"==a.readyState||"complete"==a.readyState){e()}}}else{if(isArray(e)){var b=function(){for(var f=0;f<e.length;f++){(e[f])()}};a.onload=b;a.onreadystatechange=function(){if("loaded"==a.readyState||"complete"==a.readyState){b()}}}}a.type="text/javascript";a.src=d;var c=document.getElementsByTagName("head")[0];c.appendChild(a)}else{}}function lazyLoadScripts(d,f){var e=d.length;var c=0;if(e>0){for(var a=0;a<e;a++){var b=d[a];lazyLoadScript(b,function(){c++;if(e==c){if("function"===typeof f){f()}else{if(isArray(f)){for(var g=0;g<f.length;g++){(f[g])()}}}}})}}}var isTimeout=false;var lazyLoadFunction=null;var lazyScriptLoaded=false;var lazyScriptTimeout=2000;lazyLoadFunction=function(){lazyScriptLoaded=true;lazyLoadScript("http://script.suning.cn/javascript/ShoppingArea/Common/J_lazyload_shop.js",function(){$("img[src2]").Jlazyload({type:"image",placeholderClass:"err-product"})})};function checkLazyScriptTimeout(){isTimeout=true;if(!lazyScriptLoaded){if(!!lazyLoadFunction){lazyLoadFunction()}else{setTimeout(checkLazyScriptTimeout,1000)}}}setTimeout(checkLazyScriptTimeout,lazyScriptTimeout);addOnLoad(lazyLoadFunction);function getGroupInfo(b){var a="http://ju.suning.com";$.ajax({url:a+"/ajax/getGroupInfo-"+b+".htm",type:"get",dataType:"jsonp",async:false,jsonp:"callback"})}function commInfoCallback(a){var b=$(".js-product."+a.grppurId);b.find(".js-unit-price").html(a.gbPrice);b.find(".js-unit-refPrice").html(a.payPrice);b.find(".js-saleNum").html(a.saleNum);b.find(".time").timedown({granularity:"day",Edate:formatDate(a.gbEnddate)})}function formatDate(b){var a=new Date(b);return a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate()+" "+a.getHours()+":"+a.getMinutes()+":"+a.getSeconds()}var validateData=function(a){var b=typeof(a)=="object"&&Object.prototype.toString.call(a).toLowerCase()=="[object array]"&&a.length;return b};function bindData(f){if(!validateData(f)){if(window.console){console.log("数据格式有问题！")}return}for(var c=0;c<$(".js-product").size();c++){var j=products[c];var a=j.src,b=j.name,d=j.desc,e=j.grppurId,g=j.link;var h=$(".js-product").eq(c).addClass(e);h.find(".pro-img").find("img").attr("lazy-src",a).attr("title",b);h.find(".pro-name").html(b).attr("title",b);h.find(".pro-desc").html(d).attr("title",d);h.find("a").attr("href",g);getGroupInfo(e)}lazyelem.listen()}function formatNum(a){return a.toString().replace(/^(\d)$/,"0$1")}(function(b){b.fn.timedown=function(c){var d=b.extend({},b.fn.timedown.defaults,c);return this.each(function(){var o=null;var h=null;var j=b(this);var n=d.granularity;var k=d.Sdate;var i=d.Edate;var e=d.callback;if(!a(i)){alert("日期格式不正确,请重新输入");return false}if(k==null){var g=new Date()}else{k=k.toString().replace(/-/g,"/");var g=new Date(k)}i=i.toString().replace(/-/g,"/");var l=new Date(i);var m=l-g;function f(){if(m<0){j.html("<span>00</span><span>00</span><span>00</span><span>00</span>")}if(h==null){h=m/1000}if(h>=0){var p=Math.floor(h/86400);var s=Math.floor((h-86400*p)/3600);var q=Math.floor((h-p*86400-s*3600)/60);var r=Math.floor(h%60);if(n==="hour"){j.html("<span>"+formatNum(s+p*24)+"</span><span>"+formatNum(q)+"</span><span>"+formatNum(r)+"</span>")}else{j.html("<span>"+formatNum(p)+"天</span><span>"+formatNum(s)+"小时</span><span>"+formatNum(q)+"分钟</span>")}h--}else{clearInterval(o);j.html("<span>00</span><span>00</span><span>00</span><span>00</span>");if(e){e()}}}o=setInterval(f,1000)})};function a(g){var c=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})$/;var e=g.match(c);if(e==null){return false}var f=new Date(e[1],e[3]-1,e[4],e[5],e[6],e[7]);
return(f.getFullYear()==e[1]&&(f.getMonth()+1)==e[3]&&f.getDate()==e[4]&&f.getHours()==e[5]&&f.getMinutes()==e[6]&&f.getSeconds()==e[7])}b.fn.timedown.defaults={granularity:"day",Sdate:null,Edate:"2014-06-13 04:00:00",callback:function(){}}})(jQuery);