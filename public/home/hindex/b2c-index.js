var b2cIndex=b2cIndex||{};b2cIndex.Slide=function(d,c){this.opt=$.extend({event:"click",mouseOverDelay:0,auto:true,delay:5000,duration:500,showLabel:true,onchange:function(a){},onchangestart:function(a){},oninitend:function(a){}},c);this.container=$(d);this.items=this.container.find("li");this.index=0;this.pager=null;this.animating=false;this._init()};b2cIndex.Slide.prototype={_init:function(){var b=this;if(this.items.length>1&&this.opt.showLabel){this._createLabel()}this.to(0);if(this.opt.auto){this.autoStart();this.container.hover(function(){b.autoPause()},function(){b.autoStart()})}this.opt.oninitend.call(this,this.container)},_createLabel:function(){var e=this,h=[],g,f;h.push('<div class="banner-nav">');for(f=1;f<=this.items.size();f++){h.push('<a name="hwg_none_lbgg_yd0'+f+'" href="javascript:;" class="page-item"></a>')}h.push("</div>");this.pager=typeof this.opt.showLabel=="string"?this.container.find(this.opt.showLabel):$(h.join("")).appendTo(this.container.parent().find(".banner-nav-wrap"));if(this.opt.mouseOverDelay){this.pager.find("a").hover(function(){var a=$(this).index();g=setTimeout(function(){e.to(a)},e.opt.mouseOverDelay)},function(){clearTimeout(g)})}else{this.pager.find("a").bind(this.opt.event,function(){e.to($(this).index())})}},autoStart:function(){var b=this;this.timer=setInterval(function(){b.next()},this.opt.delay)},autoPause:function(){clearInterval(this.timer)},prev:function(){this.to(this.index==0?this.items.size()-1:this.index-1)},next:function(){this.to(this.index==this.items.size()-1?0:this.index+1)},to:function(f){var e=this;if(this.animating){return false}this.opt.onchangestart.call(this,f);this.animating=true;this.items.stop().eq(f).fadeIn(this.opt.duration,function(){e.animating=false}).siblings().fadeOut(this.opt.duration);this.pager&&this.pager.find("a").eq(f).addClass("current").siblings().removeClass("current");var h=this.items.eq(f).find("img");var g=h.attr("src3");setTimeout(function(){h.attr("src",g).removeAttr("src3")},100);this.index=f;this.opt.onchange.call(this,f)}};b2cIndex.banner=function(){var h=new b2cIndex.Slide(".banner",{mouseOverDelay:200,duration:500,delay:5000,oninitend:function(a){var b=a.find(".banner-nav a")}}),j=$(".banner-wrap"),k=$(".left-point"),g=$(".right-point"),i=$(".banner-nav"),l=$(".banner li").size();if(l>1){j.hover(function(){k.stop(true,true).fadeIn(200);g.stop(true,true).fadeIn(200)},function(){k.stop(true,true).fadeOut(200);g.stop(true,true).fadeOut(200)});$(".banner-nav-wrap").show()}k.hover(function(){h.autoPause()},function(){h.autoStart()});g.hover(function(){h.autoPause()},function(){h.autoStart()});i.hover(function(){h.autoPause()},function(){h.autoStart()});k.click(function(){h.prev()});g.click(function(){h.next()})};b2cIndex.hotSingle=function(){$(".hot-single-con ul").eq(0).show();$(".hot-single-tab").on("hover","li",function(){var a=$(this).index();$(this).addClass("active").siblings("li").removeClass("active");$(".hot-single-con ul").eq(a).show().siblings().hide();lazyelem.listen("li[data-sku]","fn",function(b){supermarket1.priceDOM.push(b);if(supermarket1.getPriceFlag){return}supermarket1.getPrice()})})};b2cIndex.commentTrue=function(){var d=parseInt($(".comment-list li").length);var a=parseInt($(".comment-list li").eq(0).outerWidth(true));var b=parseInt(a)*d;$(".comment-list ul").css("width",b+"px");if(d>4){var c=0;$(".comment-box").on("click"," .comment-prev[animated]",function(){if($(".comment-list ul").is(":animated")){return}var e=$(this);c+=a;$(".comment-list ul").stop().animate({left:c},500,function(){$(".comment-box .comment-next").attr("animated","true");if(parseInt(c)==0){e.removeAttr("animated")}})});$(".comment-box").on("click",".comment-next[animated]",function(){if($(".comment-list ul").is(":animated")){return}var e=$(this);c-=a;$(".comment-list ul").stop().animate({left:c},500,function(){$(".comment-box .comment-prev").attr("animated","true");if(parseInt(c)==-(b-a*4)){e.removeAttr("animated")}})})}};b2cIndex.hotShop=function(){$(".commodity-tabCon").on("hover","li",function(){var a=$(this).index();$(this).addClass("active").siblings("li").removeClass("active");$(this).parents(".hot-commodity").find(".commodity-conList ul").eq(a).show().siblings().hide();lazyelem.listen("li[data-sku]","fn",function(b){supermarket1.priceDOM.push(b);if(supermarket1.getPriceFlag){return}supermarket1.getPrice()})})};b2cIndex.submitSearch=function(){var b="//2.suning.com";var c=$("#tipMsg").val();var a=$("#search-Keywords").val();if(a!=null&&a!=""&&a!=c){b="//search.suning.com/"+a+"/&ci=501218"}window.open(b)};$(function(){b2cIndex.banner();b2cIndex.hotSingle();b2cIndex.commentTrue();b2cIndex.hotShop();$("#search-Keywords").focus(function(){var a=$("#tipMsg").val();if($(this).val()==a){$(this).val("");$(this).css("color","#333")}});$("#search-Keywords").blur(function(){var a=$("#search-Keywords").val();var b=$("#tipMsg").val();if(a==""||a==b){$(this).val(b);$(this).css("color","#ccc")}});$("#searchSubmit").on("click",function(){b2cIndex.submitSearch()});$("#search-Keywords").keydown(function(a){if(a.which==13){$("#searchSubmit").click();return false}});$(".tabCnt").each(function(){var a=$(this).find("li").length;if(a<2){$(this).html("")}else{$(this).find("li").eq(0).addClass("active")}})});